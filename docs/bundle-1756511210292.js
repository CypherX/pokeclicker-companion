!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";const{AbortController:r,AbortSignal:o}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;t.exports=r,t.exports.AbortSignal=o,t.exports.default=r},{}],2:[function(e,t,n){"use strict";n.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=l(e),a=r[0],s=r[1],u=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),c=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===s&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,u[c++]=255&t);1===s&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},n.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,l=n-o;s<l;s+=a)i.push(c(e,s,s+a>l?l:s+a));1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function c(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(u(r));return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],3:[function(e,t,n){(function(t){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var t=e("base64-js"),r=e("ieee754");n.Buffer=a,n.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},n.INSPECT_MAX_BYTES=50;var o=2147483647;function i(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return s(e,t,n)}function s(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=i(n),o=r.write(e,t);o!==n&&(r=r.slice(0,o));return r}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(U(e,ArrayBuffer)||e&&U(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=a.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var o=function(e){if(a.isBuffer(e)){var t=0|d(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||W(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return l(e),i(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||U(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(o)return r?-1:N(e).length;t=(""+t).toLowerCase(),o=!0}}function p(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),W(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,o){var i,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var c=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(n+l>s&&(n=s-l),i=n;i>=0;i--){for(var d=!0,f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){d=!1;break}if(d)return i}return-1}function b(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(W(s))return a;e[n+a]=s}return a}function y(e,t,n,r){return j(N(t,e.length-n),e,n,r)}function w(e,t,n,r){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function v(e,t,n,r){return w(e,t,n,r)}function S(e,t,n,r){return j(G(t),e,n,r)}function k(e,t,n,r){return j(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function E(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function _(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,l,u=e[o],c=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[o+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(l=(15&u)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=d}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}n.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},a.allocUnsafe=function(e){return u(e)},a.allocUnsafeSlow=function(e){return u(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(U(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),U(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(U(i,Uint8Array)&&(i=a.from(i)),!a.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,o){if(U(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),l=Math.min(i,s),u=this.slice(r,o),c=e.slice(t,n),d=0;d<l;++d)if(u[d]!==c[d]){i=u[d],s=c[d];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return v(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=O(e[i]);return o}function L(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function B(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function x(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,o,i){return t=+t,n>>>=0,i||x(e,0,n,4),r.write(e,t,n,o,23,4),n+4}function P(e,t,n,o,i){return t=+t,n>>>=0,i||x(e,0,n,8),r.write(e,t,n,o,52,8),n+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=a.prototype,r},a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},a.prototype.readUInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||B(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||B(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||B(e,4,this.length),r.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||B(e,4,this.length),r.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||B(e,8,this.length),r.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||B(e,8,this.length),r.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);I(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a|0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);I(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a|0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var i=o-1;i>=0;--i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%l]}return this};var M=/[^+/0-9A-Za-z-_]/g;function O(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function U(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":2,buffer:3,ieee754:5}],4:[function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(e,t){return new Promise(function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}b(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&b(e,"error",t,n)}(e,o,{once:!0})})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var o,i,a,s;if(u(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=c(e))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=f.bind(r);return o.listener=n,r.wrapFn=o,o}function h(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):g(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function b(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function o(i){r.once&&e.removeEventListener(t,o),n(i)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var u=l.length,c=g(l,u);for(n=0;n<u;++n)i(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,o,i,a;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},{}],5:[function(e,t,n){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
n.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?o-1:0,f=n?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+d],d+=f,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=f,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=u}return(p?-1:1)*a*Math.pow(2,i-r)},n.write=function(e,t,n,r,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,d=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&s,p+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*m}},{}],6:[function(e,t,n){(function(n,r,o,i,a,s,l,u){(function(){
/*!
 LZ-UTF8 v0.6.3

 Copyright (c) 2021, Rotem Dan
 Released under the MIT license.

 Build date: 2022-07-06 

 Please report any issue at https://github.com/rotemdan/lzutf8.js/issues
*/
var i,a;!function(o){o.runningInNodeJS=function(){return"object"==typeof n&&"object"==typeof n.versions&&"string"==typeof n.versions.node},o.runningInMainNodeJSModule=function(){return o.runningInNodeJS()&&e.main===t},o.commonJSAvailable=function(){return"object"==typeof t&&"object"==typeof t.exports},o.runningInWebWorker=function(){return"undefined"==typeof window&&"object"==typeof self&&"function"==typeof self.addEventListener&&"function"==typeof self.close},o.runningInNodeChildProcess=function(){return o.runningInNodeJS()&&"function"==typeof n.send},o.runningInNullOrigin=function(){return"object"==typeof window&&"object"==typeof window.location&&"object"==typeof document&&("http:"!==document.location.protocol&&"https:"!==document.location.protocol)},o.webWorkersAvailable=function(){return"function"==typeof Worker&&!o.runningInNullOrigin()&&(!o.runningInNodeJS()&&!(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0))},o.log=function(e,t){void 0===t&&(t=!1),"object"==typeof console&&(console.log(e),t&&"object"==typeof document&&(document.body.innerHTML+=e+"<br/>"))},o.createErrorMessage=function(e,t){if(void 0===t&&(t="Unhandled exception"),null==e)return t;if(t+=": ","object"==typeof e.content){if(o.runningInNodeJS())return t+e.content.stack;var n=JSON.stringify(e.content);return"{}"!==n?t+n:t+e.content}return"string"==typeof e.content?t+e.content:t+e},o.printExceptionAndStackTraceToConsole=function(e,t){void 0===t&&(t="Unhandled exception"),o.log(o.createErrorMessage(e,t))},o.getGlobalObject=function(){return"object"==typeof r?r:"object"==typeof window?window:"object"==typeof self?self:{}},o.toString=Object.prototype.toString,o.commonJSAvailable()&&(t.exports=o)}(a||(a={})),function(){if("function"==typeof Uint8Array&&0!==new Uint8Array(1).subarray(1).byteLength){var e=function(e,t){var n=function(e,t,n){return e<t?t:e>n?n:e};e|=0,t|=0,arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=n(e,0,this.length);var r=(t=n(t,0,this.length))-e;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,r)},t=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],n=void 0;if("object"==typeof window?n=window:"object"==typeof self&&(n=self),void 0!==n)for(var r=0;r<t.length;r++)n[t[r]]&&(n[t[r]].prototype.subarray=e)}}(i||(i={})),function(t){var n=function(){function n(){}return n.compressAsync=function(e,n,r){var o=new t.Timer,i=new t.Compressor;if(!r)throw new TypeError("compressAsync: No callback argument given");if("string"==typeof e)e=t.encodeUTF8(e);else if(null==e||!(e instanceof Uint8Array))return void r(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));var a=t.ArrayTools.splitByteArray(e,n.blockSize),s=[],l=function(e){if(e<a.length){var u=void 0;try{u=i.compressBlock(a[e])}catch(e){return void r(void 0,e)}s.push(u),o.getElapsedTime()<=20?l(e+1):(t.enqueueImmediate(function(){return l(e+1)}),o.restart())}else{var c=t.ArrayTools.concatUint8Arrays(s);t.enqueueImmediate(function(){var e;try{e=t.CompressionCommon.encodeCompressedBytes(c,n.outputEncoding)}catch(e){return void r(void 0,e)}t.enqueueImmediate(function(){return r(e)})})}};t.enqueueImmediate(function(){return l(0)})},n.createCompressionStream=function(){var n=new t.Compressor,r=new(e("readable-stream").Transform)({decodeStrings:!0,highWaterMark:65536});return r._transform=function(e,o,i){var a;try{a=t.BufferTools.uint8ArrayToBuffer(n.compressBlock(t.BufferTools.bufferToUint8Array(e)))}catch(e){return void r.emit("error",e)}r.push(a),i()},r},n}();t.AsyncCompressor=n}(a||(a={})),function(t){var n=function(){function n(){}return n.decompressAsync=function(e,n,r){if(!r)throw new TypeError("decompressAsync: No callback argument given");var o=new t.Timer;try{e=t.CompressionCommon.decodeCompressedBytes(e,n.inputEncoding)}catch(e){return void r(void 0,e)}var i=new t.Decompressor,a=t.ArrayTools.splitByteArray(e,n.blockSize),s=[],l=function(e){if(e<a.length){var u=void 0;try{u=i.decompressBlock(a[e])}catch(e){return void r(void 0,e)}s.push(u),o.getElapsedTime()<=20?l(e+1):(t.enqueueImmediate(function(){return l(e+1)}),o.restart())}else{var c=t.ArrayTools.concatUint8Arrays(s);t.enqueueImmediate(function(){var e;try{e=t.CompressionCommon.encodeDecompressedBytes(c,n.outputEncoding)}catch(e){return void r(void 0,e)}t.enqueueImmediate(function(){return r(e)})})}};t.enqueueImmediate(function(){return l(0)})},n.createDecompressionStream=function(){var n=new t.Decompressor,r=new(e("readable-stream").Transform)({decodeStrings:!0,highWaterMark:65536});return r._transform=function(e,o,i){var a;try{a=t.BufferTools.uint8ArrayToBuffer(n.decompressBlock(t.BufferTools.bufferToUint8Array(e)))}catch(e){return void r.emit("error",e)}r.push(a),i()},r},n}();t.AsyncDecompressor=n}(a||(a={})),function(e){var t;!function(t){t.compressAsync=function(e,n,r){if("ByteArray"!=n.inputEncoding||e instanceof Uint8Array){var o={token:Math.random().toString(),type:"compress",data:e,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},i=function(e){var n=e.data;n&&n.token==o.token&&(t.globalWorker.removeEventListener("message",i),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};t.globalWorker.addEventListener("message",i),t.globalWorker.postMessage(o,[])}else r(void 0,new TypeError("compressAsync: input is not a Uint8Array"))},t.decompressAsync=function(e,n,r){var o={token:Math.random().toString(),type:"decompress",data:e,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},i=function(e){var n=e.data;n&&n.token==o.token&&(t.globalWorker.removeEventListener("message",i),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};t.globalWorker.addEventListener("message",i),t.globalWorker.postMessage(o,[])},t.installWebWorkerIfNeeded=function(){"object"==typeof self&&void 0===self.document&&null!=self.addEventListener&&(self.addEventListener("message",function(t){var n=t.data;if("compress"==n.type){var r=void 0;try{r=e.compress(n.data,{outputEncoding:n.outputEncoding})}catch(t){return void self.postMessage({token:n.token,type:"error",error:e.createErrorMessage(t)},[])}(o={token:n.token,type:"compressionResult",data:r,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}else if("decompress"==n.type){var o,i=void 0;try{i=e.decompress(n.data,{inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding})}catch(t){return void self.postMessage({token:n.token,type:"error",error:e.createErrorMessage(t)},[])}(o={token:n.token,type:"decompressionResult",data:i,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}}),self.addEventListener("error",function(t){e.log(e.createErrorMessage(t.error,"Unexpected LZUTF8 WebWorker exception"))}))},t.createGlobalWorkerIfNeeded=function(){if(t.globalWorker)return!0;if(!e.webWorkersAvailable())return!1;if(!t.scriptURI&&"object"==typeof document){var n=document.getElementById("lzutf8");null!=n&&(t.scriptURI=n.getAttribute("src")||void 0)}return!!t.scriptURI&&(t.globalWorker=new Worker(t.scriptURI),!0)},t.terminate=function(){t.globalWorker&&(t.globalWorker.terminate(),t.globalWorker=void 0)}}(t=e.WebWorker||(e.WebWorker={})),t.installWebWorkerIfNeeded()}(a||(a={})),function(e){var t=function(){function e(e,t,n){this.container=e,this.startPosition=t,this.length=n}return e.prototype.get=function(e){return this.container[this.startPosition+e]},e.prototype.getInReversedOrder=function(e){return this.container[this.startPosition+this.length-1-e]},e.prototype.set=function(e,t){this.container[this.startPosition+e]=t},e}();e.ArraySegment=t}(a||(a={})),function(e){!function(e){e.copyElements=function(e,t,n,r,o){for(;o--;)n[r++]=e[t++]},e.zeroElements=function(e,t,n){for(;n--;)e[t++]=0},e.countNonzeroValuesInArray=function(e){for(var t=0,n=0;n<e.length;n++)e[n]&&t++;return t},e.truncateStartingElements=function(e,t){if(e.length<=t)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var n=e.length-t,r=0;r<t;r++)e[r]=e[n+r];e.length=t},e.doubleByteArrayCapacity=function(e){var t=new Uint8Array(2*e.length);return t.set(e),t},e.concatUint8Arrays=function(e){for(var t=0,n=0,r=e;n<r.length;n++){t+=(l=r[n]).length}for(var o=new Uint8Array(t),i=0,a=0,s=e;a<s.length;a++){var l=s[a];o.set(l,i),i+=l.length}return o},e.splitByteArray=function(e,t){for(var n=[],r=0;r<e.length;){var o=Math.min(t,e.length-r);n.push(e.subarray(r,r+o)),r+=o}return n}}(e.ArrayTools||(e.ArrayTools={}))}(a||(a={})),function(e){!function(e){e.convertToUint8ArrayIfNeeded=function(t){return"function"==typeof o&&o.isBuffer(t)?e.bufferToUint8Array(t):t},e.uint8ArrayToBuffer=function(e){if(o.prototype instanceof Uint8Array){var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return Object.setPrototypeOf(t,o.prototype),t}for(var n=e.length,r=new o(n),i=0;i<n;i++)r[i]=e[i];return r},e.bufferToUint8Array=function(e){if(o.prototype instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e[r];return n}}(e.BufferTools||(e.BufferTools={}))}(a||(a={})),function(e){!function(t){t.getCroppedBuffer=function(e,t,n,r){void 0===r&&(r=0);var o=new Uint8Array(n+r);return o.set(e.subarray(t,t+n)),o},t.getCroppedAndAppendedByteArray=function(t,n,r,o){return e.ArrayTools.concatUint8Arrays([t.subarray(n,n+r),o])},t.detectCompressionSourceEncoding=function(e){if(null==e)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if("string"==typeof e)return"String";if(e instanceof Uint8Array||"function"==typeof o&&o.isBuffer(e))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},t.encodeCompressedBytes=function(t,n){switch(n){case"ByteArray":return t;case"Buffer":return e.BufferTools.uint8ArrayToBuffer(t);case"Base64":return e.encodeBase64(t);case"BinaryString":return e.encodeBinaryString(t);case"StorageBinaryString":return e.encodeStorageBinaryString(t);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},t.decodeCompressedBytes=function(t,n){if(null==n)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(n){case"ByteArray":case"Buffer":var r=e.BufferTools.convertToUint8ArrayIfNeeded(t);if(!(r instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return r;case"Base64":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return e.decodeBase64(t);case"BinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return e.decodeBinaryString(t);case"StorageBinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return e.decodeStorageBinaryString(t);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '".concat(n,"'"))}},t.encodeDecompressedBytes=function(t,n){switch(n){case"String":return e.decodeUTF8(t);case"ByteArray":return t;case"Buffer":if("function"!=typeof o)throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return e.BufferTools.uint8ArrayToBuffer(t);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}}(e.CompressionCommon||(e.CompressionCommon={}))}(a||(a={})),function(e){var t;!function(t){var n,r=[];t.enqueueImmediate=function(e){r.push(e),1===r.length&&n()},t.initializeScheduler=function(){var t=function(){for(var t=0,n=r;t<n.length;t++){var o=n[t];try{o.call(void 0)}catch(t){e.printExceptionAndStackTraceToConsole(t,"enqueueImmediate exception")}}r.length=0};if(e.runningInNodeJS())n=function(){return u(function(){return t()})};else if("object"==typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.postMessage){var o,i="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",function(e){e.data===i&&t()}),o=e.runningInNullOrigin()?"*":window.location.href,n=function(){return window.postMessage(i,o)}}else if("function"==typeof MessageChannel&&"function"==typeof MessagePort){var a=new MessageChannel;a.port1.onmessage=function(){return t()},n=function(){return a.port2.postMessage(0)}}else n=function(){return setTimeout(function(){return t()},0)}},t.initializeScheduler()}(t=e.EventLoop||(e.EventLoop={})),e.enqueueImmediate=function(e){return t.enqueueImmediate(e)}}(a||(a={})),function(e){!function(e){e.override=function(t,n){return e.extend(t,n)},e.extend=function(e,t){if(null==e)throw new TypeError("obj is null or undefined");if("object"!=typeof e)throw new TypeError("obj is not an object");if(null==t&&(t={}),"object"!=typeof t)throw new TypeError("newProperties is not an object");if(null!=t)for(var n in t)e[n]=t[n];return e}}(e.ObjectTools||(e.ObjectTools={}))}(a||(a={})),function(e){e.getRandomIntegerInRange=function(e,t){return e+Math.floor(Math.random()*(t-e))},e.getRandomUTF16StringOfLength=function(t){for(var n="",r=0;r<t;r++){var o=void 0;do{o=e.getRandomIntegerInRange(0,1114112)}while(o>=55296&&o<=57343);n+=e.Encoding.CodePoint.decodeToString(o)}return n}}(a||(a={})),function(e){var t=function(){function e(e){void 0===e&&(e=1024),this.outputBufferCapacity=e,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return e.prototype.appendCharCode=function(e){this.outputBuffer[this.outputPosition++]=e,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},e.prototype.appendCharCodes=function(e){for(var t=0,n=e.length;t<n;t++)this.appendCharCode(e[t])},e.prototype.appendString=function(e){for(var t=0,n=e.length;t<n;t++)this.appendCharCode(e.charCodeAt(t))},e.prototype.appendCodePoint=function(e){if(e<=65535)this.appendCharCode(e);else{if(!(e<=1114111))throw new Error("appendCodePoint: A code point of ".concat(e," cannot be encoded in UTF-16"));this.appendCharCode(55296+(e-65536>>>10)),this.appendCharCode(56320+(e-65536&1023))}},e.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},e.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},e}();e.StringBuilder=t}(a||(a={})),function(e){var t=function(){function t(){this.restart()}return t.prototype.restart=function(){this.startTime=t.getTimestamp()},t.prototype.getElapsedTime=function(){return t.getTimestamp()-this.startTime},t.prototype.getElapsedTimeAndRestart=function(){var e=this.getElapsedTime();return this.restart(),e},t.prototype.logAndRestart=function(t,n){void 0===n&&(n=!0);var r=this.getElapsedTime(),o="".concat(t,": ").concat(r.toFixed(3),"ms");return e.log(o,n),this.restart(),r},t.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},t.getMicrosecondTimestamp=function(){return Math.floor(1e3*t.getTimestamp())},t.createGlobalTimestampFunction=function(){if("object"==typeof n&&"function"==typeof n.hrtime){var e=0;this.timestampFunc=function(){var t=n.hrtime(),r=1e3*t[0]+t[1]/1e6;return e+r},e=Date.now()-this.timestampFunc()}else if("object"==typeof chrome&&chrome.Interval){var t=Date.now(),r=new chrome.Interval;r.start(),this.timestampFunc=function(){return t+r.microseconds()/1e3}}else if("object"==typeof performance&&performance.now){var o=Date.now()-performance.now();this.timestampFunc=function(){return o+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return(new Date).getTime()}},t}();e.Timer=t}(a||(a={})),function(e){var t=function(){function t(t){void 0===t&&(t=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,t&&"function"==typeof Uint32Array?this.prefixHashTable=new e.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new e.CompressorSimpleHashTable(this.PrefixHashTableSize)}return t.prototype.compressBlock=function(t){if(null==t)throw new TypeError("compressBlock: undefined or null input received");return"string"==typeof t&&(t=e.encodeUTF8(t)),t=e.BufferTools.convertToUint8ArrayIfNeeded(t),this.compressUtf8Block(t)},t.prototype.compressUtf8Block=function(e){if(!e||0==e.length)return new Uint8Array(0);var t=this.cropAndAddNewBytesToInputBuffer(e),n=this.inputBuffer,r=this.inputBuffer.length;this.outputBuffer=new Uint8Array(e.length),this.outputBufferPosition=0;for(var o=0,i=t;i<r;i++){var a=n[i],s=i<o;if(i>r-this.MinimumSequenceLength)s||this.outputRawByte(a);else{var l=this.getBucketIndexForPrefix(i);if(!s){var u=this.findLongestMatch(i,l);null!=u&&(this.outputPointerBytes(u.length,u.distance),o=i+u.length,s=!0)}s||this.outputRawByte(a);var c=this.inputBufferStreamOffset+i;this.prefixHashTable.addValueToBucket(l,c)}}return this.outputBuffer.subarray(0,this.outputBufferPosition)},t.prototype.findLongestMatch=function(e,t){var n=this.prefixHashTable.getArraySegmentForBucketIndex(t,this.reusableArraySegmentObject);if(null==n)return null;for(var r,o=this.inputBuffer,i=0,a=0;a<n.length;a++){var s=n.getInReversedOrder(a)-this.inputBufferStreamOffset,l=e-s,u=void 0;if(u=void 0===r?this.MinimumSequenceLength-1:r<128&&l>=128?i+(i>>>1):i,l>this.MaximumMatchDistance||u>=this.MaximumSequenceLength||e+u>=o.length)break;if(o[s+u]===o[e+u])for(var c=0;;c++){if(e+c===o.length||o[s+c]!==o[e+c]){c>u&&(r=l,i=c);break}if(c===this.MaximumSequenceLength)return{distance:l,length:this.MaximumSequenceLength}}}return void 0!==r?{distance:r,length:i}:null},t.prototype.getBucketIndexForPrefix=function(e){return(7880599*this.inputBuffer[e]+39601*this.inputBuffer[e+1]+199*this.inputBuffer[e+2]+this.inputBuffer[e+3])%this.PrefixHashTableSize},t.prototype.outputPointerBytes=function(e,t){t<128?(this.outputRawByte(192|e),this.outputRawByte(t)):(this.outputRawByte(224|e),this.outputRawByte(t>>>8),this.outputRawByte(255&t))},t.prototype.outputRawByte=function(e){this.outputBuffer[this.outputBufferPosition++]=e},t.prototype.cropAndAddNewBytesToInputBuffer=function(t){if(void 0===this.inputBuffer)return this.inputBuffer=t,0;var n=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),r=this.inputBuffer.length-n;return this.inputBuffer=e.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,r,n,t),this.inputBufferStreamOffset+=r,n},t}();e.Compressor=t}(a||(a={})),function(e){var t=function(){function t(e){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(2*e),this.storage=new Uint32Array(2*e),this.storageIndex=1}return t.prototype.addValueToBucket=function(t,n){t<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var r,o=this.bucketLocators[t];if(0===o)o=this.storageIndex,r=1,this.storage[this.storageIndex]=n,this.storageIndex+=this.minimumBucketCapacity;else{(r=this.bucketLocators[t+1])===this.maximumBucketCapacity-1&&(r=this.truncateBucketToNewerElements(o,r,this.maximumBucketCapacity/2));var i=o+r;0===this.storage[i]?(this.storage[i]=n,i===this.storageIndex&&(this.storageIndex+=r)):(e.ArrayTools.copyElements(this.storage,o,this.storage,this.storageIndex,r),o=this.storageIndex,this.storageIndex+=r,this.storage[this.storageIndex++]=n,this.storageIndex+=r),r++}this.bucketLocators[t]=o,this.bucketLocators[t+1]=r},t.prototype.truncateBucketToNewerElements=function(t,n,r){var o=t+n-r;return e.ArrayTools.copyElements(this.storage,o,this.storage,t,r),e.ArrayTools.zeroElements(this.storage,t+r,n-r),r},t.prototype.compact=function(){var t=this.bucketLocators,n=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var r=0;r<t.length;r+=2){var o=t[r+1];0!==o&&(this.bucketLocators[r]=this.storageIndex,this.bucketLocators[r+1]=o,this.storageIndex+=Math.max(Math.min(2*o,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(8*this.storageIndex);for(r=0;r<t.length;r+=2){var i=t[r];if(0!==i){var a=this.bucketLocators[r],s=this.bucketLocators[r+1];e.ArrayTools.copyElements(n,i,this.storage,a,s)}}},t.prototype.getArraySegmentForBucketIndex=function(t,n){t<<=1;var r=this.bucketLocators[t];return 0===r?null:(void 0===n&&(n=new e.ArraySegment(this.storage,r,this.bucketLocators[t+1])),n)},t.prototype.getUsedBucketCount=function(){return Math.floor(e.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.bucketLocators.length;t+=2)e+=this.bucketLocators[t+1];return e},t}();e.CompressorCustomHashTable=t}(a||(a={})),function(e){var t=function(){function t(e){this.maximumBucketCapacity=64,this.buckets=new Array(e)}return t.prototype.addValueToBucket=function(t,n){var r=this.buckets[t];void 0===r?this.buckets[t]=[n]:(r.length===this.maximumBucketCapacity-1&&e.ArrayTools.truncateStartingElements(r,this.maximumBucketCapacity/2),r.push(n))},t.prototype.getArraySegmentForBucketIndex=function(t,n){var r=this.buckets[t];return void 0===r?null:(void 0===n&&(n=new e.ArraySegment(r,0,r.length)),n)},t.prototype.getUsedBucketCount=function(){return e.ArrayTools.countNonzeroValuesInArray(this.buckets)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.buckets.length;t++)void 0!==this.buckets[t]&&(e+=this.buckets[t].length);return e},t}();e.CompressorSimpleHashTable=t}(a||(a={})),function(e){var t=function(){function t(){this.MaximumMatchDistance=32767,this.outputPosition=0}return t.prototype.decompressBlockToString=function(t){return t=e.BufferTools.convertToUint8ArrayIfNeeded(t),e.decodeUTF8(this.decompressBlock(t))},t.prototype.decompressBlock=function(t){this.inputBufferRemainder&&(t=e.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,t]),this.inputBufferRemainder=void 0);for(var n=this.cropOutputBufferToWindowAndInitialize(Math.max(4*t.length,1024)),r=0,o=t.length;r<o;r++){var i=t[r];if(i>>>6==3){var a=i>>>5;if(r==o-1||r==o-2&&7==a){this.inputBufferRemainder=t.subarray(r);break}if(t[r+1]>>>7==1)this.outputByte(i);else{var s=31&i,l=void 0;6==a?(l=t[r+1],r+=1):(l=t[r+1]<<8|t[r+2],r+=2);for(var u=this.outputPosition-l,c=0;c<s;c++)this.outputByte(this.outputBuffer[u+c])}}else this.outputByte(i)}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),e.CompressionCommon.getCroppedBuffer(this.outputBuffer,n,this.outputPosition-n)},t.prototype.outputByte=function(t){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=e.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=t},t.prototype.cropOutputBufferToWindowAndInitialize=function(t){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(t),0;var n=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=e.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-n,n,t),this.outputPosition=n,this.outputBufferRemainder){for(var r=0;r<this.outputBufferRemainder.length;r++)this.outputByte(this.outputBufferRemainder[r]);this.outputBufferRemainder=void 0}return n},t.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var e=1;e<=4&&this.outputPosition-e>=0;e++){var t=this.outputBuffer[this.outputPosition-e];if(e<4&&t>>>3==30||e<3&&t>>>4==14||e<2&&t>>>5==6)return this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-e,this.outputPosition),void(this.outputPosition-=e)}},t}();e.Decompressor=t}(a||(a={})),function(e){!function(t){!function(t){var n=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),r=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]);t.encode=function(n){return n&&0!=n.length?e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(n).toString("base64"):t.encodeWithJS(n):""},t.decode=function(n){return n?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(o.from(n,"base64")):t.decodeWithJS(n):new Uint8Array(0)},t.encodeWithJS=function(t,r){if(void 0===r&&(r=!0),!t||0==t.length)return"";for(var o,i=n,a=new e.StringBuilder,s=0,l=t.length;s<l;s+=3)s<=l-3?(o=t[s]<<16|t[s+1]<<8|t[s+2],a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),a.appendCharCode(i[o>>>6&63]),a.appendCharCode(i[63&o]),o=0):s===l-2?(o=t[s]<<16|t[s+1]<<8,a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),a.appendCharCode(i[o>>>6&63]),r&&a.appendCharCode(61)):s===l-1&&(o=t[s]<<16,a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),r&&(a.appendCharCode(61),a.appendCharCode(61)));return a.getOutputString()},t.decodeWithJS=function(e,t){if(!e||0==e.length)return new Uint8Array(0);var n=e.length%4;if(1===n)throw new Error("Invalid Base64 string: length % 4 == 1");2===n?e+="==":3===n&&(e+="="),t||(t=new Uint8Array(e.length));for(var o=0,i=e.length,a=0;a<i;a+=4){var s=r[e.charCodeAt(a)]<<18|r[e.charCodeAt(a+1)]<<12|r[e.charCodeAt(a+2)]<<6|r[e.charCodeAt(a+3)];t[o++]=s>>>16&255,t[o++]=s>>>8&255,t[o++]=255&s}return 61==e.charCodeAt(i-1)&&o--,61==e.charCodeAt(i-2)&&o--,t.subarray(0,o)}}(t.Base64||(t.Base64={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(t){!function(t){t.encode=function(t){if(null==t)throw new TypeError("BinaryString.encode: undefined or null input received");if(0===t.length)return"";for(var n=t.length,r=new e.StringBuilder,o=0,i=1,a=0;a<n;a+=2){var s=void 0;s=a==n-1?t[a]<<8:t[a]<<8|t[a+1],r.appendCharCode(o<<16-i|s>>>i),o=s&(1<<i)-1,15===i?(r.appendCharCode(o),o=0,i=1):i+=1,a>=n-2&&r.appendCharCode(o<<16-i)}return r.appendCharCode(32768|n%2),r.getOutputString()},t.decode=function(e){if("string"!=typeof e)throw new TypeError("BinaryString.decode: invalid input type");if(""==e)return new Uint8Array(0);for(var t=new Uint8Array(3*e.length),n=0,r=function(e){t[n++]=e>>>8,t[n++]=255&e},o=0,i=0,a=0;a<e.length;a++){var s=e.charCodeAt(a);s>=32768?(32769==s&&n--,i=0):(0==i?o=s:(r(o<<i|s>>>15-i),o=s&(1<<15-i)-1),15==i?i=0:i+=1)}return t.subarray(0,n)}}(t.BinaryString||(t.BinaryString={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(e){!function(e){e.encodeFromString=function(e,t){var n=e.charCodeAt(t);if(n<55296||n>56319)return n;var r=e.charCodeAt(t+1);if(r>=56320&&r<=57343)return r-56320+(n-55296<<10)+65536;throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code ".concat(n,", followed by ").concat(r,", which is not a trailing surrogate character code."))},e.decodeToString=function(e){if(e<=65535)return String.fromCharCode(e);if(e<=1114111)return String.fromCharCode(55296+(e-65536>>>10),56320+(e-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of ".concat(e," cannot be encoded in UTF-16"))}}(e.CodePoint||(e.CodePoint={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(e){!function(e){var t=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];e.encode=function(e){for(var n=[],r=0;r<e.length;r++)n.push(t[e[r]]);return n.join(" ")}}(e.DecimalString||(e.DecimalString={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(e){!function(t){t.encode=function(t){return e.BinaryString.encode(t).replace(/\0/g,"")},t.decode=function(t){return e.BinaryString.decode(t.replace(/\u8002/g,"\0"))}}(e.StorageBinaryString||(e.StorageBinaryString={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(t){!function(n){var r,i;n.encode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(o.from(t,"utf8")):n.createNativeTextEncoderAndDecoderIfAvailable()?r.encode(t):n.encodeWithJS(t):new Uint8Array(0)},n.decode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(t).toString("utf8"):n.createNativeTextEncoderAndDecoderIfAvailable()?i.decode(t):n.decodeWithJS(t):""},n.encodeWithJS=function(e,n){if(!e||0==e.length)return new Uint8Array(0);n||(n=new Uint8Array(4*e.length));for(var r=0,o=0;o<e.length;o++){var i=t.CodePoint.encodeFromString(e,o);if(i<=127)n[r++]=i;else if(i<=2047)n[r++]=192|i>>>6,n[r++]=128|63&i;else if(i<=65535)n[r++]=224|i>>>12,n[r++]=128|i>>>6&63,n[r++]=128|63&i;else{if(!(i<=1114111))throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)");n[r++]=240|i>>>18,n[r++]=128|i>>>12&63,n[r++]=128|i>>>6&63,n[r++]=128|63&i,o++}}return n.subarray(0,r)},n.decodeWithJS=function(t,n,r){if(void 0===n&&(n=0),!t||0==t.length)return"";void 0===r&&(r=t.length);for(var o,i,a=new e.StringBuilder,s=n,l=r;s<l;){if((i=t[s])>>>7==0)o=i,s+=1;else if(i>>>5==6){if(s+1>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(31&i)<<6|63&t[s+1],s+=2}else if(i>>>4==14){if(s+2>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(15&i)<<12|(63&t[s+1])<<6|63&t[s+2],s+=3}else{if(i>>>3!=30)throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+s);if(s+3>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(7&i)<<18|(63&t[s+1])<<12|(63&t[s+2])<<6|63&t[s+3],s+=4}a.appendCodePoint(o)}return a.getOutputString()},n.createNativeTextEncoderAndDecoderIfAvailable=function(){return!!r||"function"==typeof TextEncoder&&(r=new TextEncoder("utf-8"),i=new TextDecoder("utf-8"),!0)}}(t.UTF8||(t.UTF8={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){e.compress=function(t,n){if(void 0===n&&(n={}),null==t)throw new TypeError("compress: undefined or null input received");var r=e.CompressionCommon.detectCompressionSourceEncoding(t);n=e.ObjectTools.override({inputEncoding:r,outputEncoding:"ByteArray"},n);var o=(new e.Compressor).compressBlock(t);return e.CompressionCommon.encodeCompressedBytes(o,n.outputEncoding)},e.decompress=function(t,n){if(void 0===n&&(n={}),null==t)throw new TypeError("decompress: undefined or null input received");n=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},n);var r=e.CompressionCommon.decodeCompressedBytes(t,n.inputEncoding),o=(new e.Decompressor).decompressBlock(r);return e.CompressionCommon.encodeDecompressedBytes(o,n.outputEncoding)},e.compressAsync=function(t,n,r){var o;null==r&&(r=function(){});try{o=e.CompressionCommon.detectCompressionSourceEncoding(t)}catch(e){return void r(void 0,e)}n=e.ObjectTools.override({inputEncoding:o,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},n),e.enqueueImmediate(function(){n.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.compressAsync(t,n,r):e.AsyncCompressor.compressAsync(t,n,r)})},e.decompressAsync=function(t,n,r){if(null==r&&(r=function(){}),null!=t){n=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},n);var o=e.BufferTools.convertToUint8ArrayIfNeeded(t);e.EventLoop.enqueueImmediate(function(){n.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.decompressAsync(o,n,r):e.AsyncDecompressor.decompressAsync(t,n,r)})}else r(void 0,new TypeError("decompressAsync: undefined or null input received"))},e.createCompressionStream=function(){return e.AsyncCompressor.createCompressionStream()},e.createDecompressionStream=function(){return e.AsyncDecompressor.createDecompressionStream()},e.encodeUTF8=function(t){return e.Encoding.UTF8.encode(t)},e.decodeUTF8=function(t){return e.Encoding.UTF8.decode(t)},e.encodeBase64=function(t){return e.Encoding.Base64.encode(t)},e.decodeBase64=function(t){return e.Encoding.Base64.decode(t)},e.encodeBinaryString=function(t){return e.Encoding.BinaryString.encode(t)},e.decodeBinaryString=function(t){return e.Encoding.BinaryString.decode(t)},e.encodeStorageBinaryString=function(t){return e.Encoding.StorageBinaryString.encode(t)},e.decodeStorageBinaryString=function(t){return e.Encoding.StorageBinaryString.decode(t)}}(a||(a={}))}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate)},{_process:31,buffer:3,"readable-stream":25,timers:34}],7:[function(e,t,n){"use strict";const{AbortError:r,codes:o}=e("../../ours/errors"),{isNodeStream:i,isWebStream:a,kControllerErrorFunction:s}=e("./utils"),l=e("./end-of-stream"),{ERR_INVALID_ARG_TYPE:u}=o;t.exports.addAbortSignal=function(e,n){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new u(t,"AbortSignal",e)})(e,"signal"),!i(n)&&!a(n))throw new u("stream",["ReadableStream","WritableStream","Stream"],n);return t.exports.addAbortSignalNoValidate(e,n)},t.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const n=i(t)?()=>{t.destroy(new r(void 0,{cause:e.reason}))}:()=>{t[s](new r(void 0,{cause:e.reason}))};return e.aborted?n():(e.addEventListener("abort",n),l(t,()=>e.removeEventListener("abort",n))),t}},{"../../ours/errors":26,"./end-of-stream":13,"./utils":22}],8:[function(e,t,n){"use strict";const{StringPrototypeSlice:r,SymbolIterator:o,TypedArrayPrototypeSet:i,Uint8Array:a}=e("../../ours/primordials"),{Buffer:s}=e("buffer"),{inspect:l}=e("../../ours/util");t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,n=""+t.data;for(;null!==(t=t.next);)n+=e+t.data;return n}concat(e){if(0===this.length)return s.alloc(0);const t=s.allocUnsafe(e>>>0);let n=this.head,r=0;for(;n;)i(t,n.data,r),r+=n.data.length,n=n.next;return t}consume(e,t){const n=this.head.data;if(e<n.length){const t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[o](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,o=0;do{const i=n.data;if(!(e>i.length)){e===i.length?(t+=i,++o,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(i,0,e),this.head=n,n.data=r(i,e));break}t+=i,e-=i.length,++o}while(null!==(n=n.next));return this.length-=o,t}_getBuffer(e){const t=s.allocUnsafe(e),n=e;let r=this.head,o=0;do{const s=r.data;if(!(e>s.length)){e===s.length?(i(t,s,n-e),++o,r.next?this.head=r.next:this.head=this.tail=null):(i(t,new a(s.buffer,s.byteOffset,e),n-e),this.head=r,r.data=s.slice(e));break}i(t,s,n-e),e-=s.length,++o}while(null!==(r=r.next));return this.length-=o,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},{"../../ours/primordials":27,"../../ours/util":28,buffer:3}],9:[function(e,t,n){"use strict";const{pipeline:r}=e("./pipeline"),o=e("./duplex"),{destroyer:i}=e("./destroy"),{isNodeStream:a,isReadable:s,isWritable:l,isWebStream:u,isTransformStream:c,isWritableStream:d,isReadableStream:f}=e("./utils"),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=e("../../ours/errors"),g=e("./end-of-stream");t.exports=function(...e){if(0===e.length)throw new m("streams");if(1===e.length)return o.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=o.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=o.from(e[t])}for(let n=0;n<e.length;++n)if(a(e[n])||u(e[n])){if(n<e.length-1&&!(s(e[n])||f(e[n])||c(e[n])))throw new h(`streams[${n}]`,t[n],"must be readable");if(n>0&&!(l(e[n])||d(e[n])||c(e[n])))throw new h(`streams[${n}]`,t[n],"must be writable")}let n,b,y,w,v;const S=e[0],k=r(e,function(e){const t=w;w=null,t?t(e):e?v.destroy(e):_||E||v.destroy()}),E=!!(l(S)||d(S)||c(S)),_=!!(s(k)||f(k)||c(k));if(v=new o({writableObjectMode:!(null==S||!S.writableObjectMode),readableObjectMode:!(null==k||!k.writableObjectMode),writable:E,readable:_}),E){if(a(S))v._write=function(e,t,r){S.write(e,t)?r():n=r},v._final=function(e){S.end(),b=e},S.on("drain",function(){if(n){const e=n;n=null,e()}});else if(u(S)){const e=(c(S)?S.writable:S).getWriter();v._write=async function(t,n,r){try{await e.ready,e.write(t).catch(()=>{}),r()}catch(e){r(e)}},v._final=async function(t){try{await e.ready,e.close().catch(()=>{}),b=t}catch(e){t(e)}}}const e=c(k)?k.readable:k;g(e,()=>{if(b){const e=b;b=null,e()}})}if(_)if(a(k))k.on("readable",function(){if(y){const e=y;y=null,e()}}),k.on("end",function(){v.push(null)}),v._read=function(){for(;;){const e=k.read();if(null===e)return void(y=v._read);if(!v.push(e))return}};else if(u(k)){const e=(c(k)?k.readable:k).getReader();v._read=async function(){for(;;)try{const{value:t,done:n}=await e.read();if(!v.push(t))return;if(n)return void v.push(null)}catch{return}}}return v._destroy=function(e,t){e||null===w||(e=new p),y=null,n=null,b=null,null===w?t(e):(w=t,a(k)&&i(k,e))},v}},{"../../ours/errors":26,"./destroy":10,"./duplex":11,"./end-of-stream":13,"./pipeline":18,"./utils":22}],10:[function(e,t,n){"use strict";const r=e("process/"),{aggregateTwoErrors:o,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:a}=e("../../ours/errors"),{Symbol:s}=e("../../ours/primordials"),{kDestroyed:l,isDestroyed:u,isFinished:c,isServerRequest:d}=e("./utils"),f=s("kDestroy"),p=s("kConstruct");function h(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function m(e,t,n){let o=!1;function i(t){if(o)return;o=!0;const i=e._readableState,a=e._writableState;h(t,a,i),a&&(a.closed=!0),i&&(i.closed=!0),"function"==typeof n&&n(t),t?r.nextTick(g,e,t):r.nextTick(b,e)}try{e._destroy(t||null,i)}catch(t){i(t)}}function g(e,t){y(e,t),b(e)}function b(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=n&&n.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function y(e,t){const n=e._readableState,r=e._writableState;null!=r&&r.errorEmitted||null!=n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function w(e,t,n){const o=e._readableState,i=e._writableState;if(null!=i&&i.destroyed||null!=o&&o.destroyed)return this;null!=o&&o.autoDestroy||null!=i&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),o&&!o.errored&&(o.errored=t),n?r.nextTick(y,e,t):y(e,t))}function v(e){let t=!1;function n(n){if(t)return void w(e,null!=n?n:new i);t=!0;const o=e._readableState,a=e._writableState,s=a||o;o&&(o.constructed=!0),a&&(a.constructed=!0),s.destroyed?e.emit(f,n):n?w(e,n,!0):r.nextTick(S,e)}try{e._construct(e=>{r.nextTick(n,e)})}catch(e){r.nextTick(n,e)}}function S(e){e.emit(p)}function k(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function E(e){e.emit("close")}function _(e,t){e.emit("error",t),r.nextTick(E,e)}t.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const n=e._readableState,o=e._writableState;n&&(n.constructed=!1),o&&(o.constructed=!1),e.once(p,t),e.listenerCount(p)>1||r.nextTick(v,e)},destroyer:function(e,t){e&&!u(e)&&(t||c(e)||(t=new a),d(e)?(e.socket=null,e.destroy(t)):k(e)?e.abort():k(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(_,e,t):r.nextTick(E,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){const n=this._readableState,r=this._writableState,i=r||n;return null!=r&&r.destroyed||null!=n&&n.destroyed?("function"==typeof t&&t(),this):(h(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?m(this,e,t):this.once(f,function(n){m(this,o(n,e),t)}),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:w}},{"../../ours/errors":26,"../../ours/primordials":27,"./utils":22,"process/":31}],11:[function(e,t,n){"use strict";const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:i,ObjectSetPrototypeOf:a}=e("../../ours/primordials");t.exports=u;const s=e("./readable"),l=e("./writable");a(u.prototype,s.prototype),a(u,s);{const e=i(l.prototype);for(let t=0;t<e.length;t++){const n=e[t];u.prototype[n]||(u.prototype[n]=l.prototype[n])}}function u(e){if(!(this instanceof u))return new u(e);s.call(this,e),l.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let c,d;function f(){return void 0===c&&(c={}),c}r(u.prototype,{writable:{__proto__:null,...o(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(l.prototype,"writableLength")},writableFinished:{__proto__:null,...o(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),u.fromWeb=function(e,t){return f().newStreamDuplexFromReadableWritablePair(e,t)},u.toWeb=function(e){return f().newReadableWritablePairFromDuplex(e)},u.from=function(t){return d||(d=e("./duplexify")),d(t,"body")}},{"../../ours/primordials":27,"./duplexify":12,"./readable":19,"./writable":23}],12:[function(e,t,n){const r=e("process/"),o=e("buffer"),{isReadable:i,isWritable:a,isIterable:s,isNodeStream:l,isReadableNodeStream:u,isWritableNodeStream:c,isDuplexNodeStream:d}=e("./utils"),f=e("./end-of-stream"),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:m}}=e("../../ours/errors"),{destroyer:g}=e("./destroy"),b=e("./duplex"),y=e("./readable"),{createDeferredPromise:w}=e("../../ours/util"),v=e("./from"),S=globalThis.Blob||o.Blob,k=void 0!==S?function(e){return e instanceof S}:function(e){return!1},E=globalThis.AbortController||e("abort-controller").AbortController,{FunctionPrototypeCall:_}=e("../../ours/primordials");class A extends b{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function C(e){const t=e.readable&&"function"!=typeof e.readable.read?y.wrap(e.readable):e.readable,n=e.writable;let r,o,s,l,u,c=!!i(t),d=!!a(n);function h(e){const t=l;l=null,t?t(e):e&&u.destroy(e)}return u=new A({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:c,writable:d}),d&&(f(n,e=>{d=!1,e&&g(t,e),h(e)}),u._write=function(e,t,o){n.write(e,t)?o():r=o},u._final=function(e){n.end(),o=e},n.on("drain",function(){if(r){const e=r;r=null,e()}}),n.on("finish",function(){if(o){const e=o;o=null,e()}})),c&&(f(t,e=>{c=!1,e&&g(t,e),h(e)}),t.on("readable",function(){if(s){const e=s;s=null,e()}}),t.on("end",function(){u.push(null)}),u._read=function(){for(;;){const e=t.read();if(null===e)return void(s=u._read);if(!u.push(e))return}}),u._destroy=function(e,i){e||null===l||(e=new p),s=null,r=null,o=null,null===l?i(e):(l=i,g(n,e),g(t,e))},u}t.exports=function e(t,n){if(d(t))return t;if(u(t))return C({readable:t});if(c(t))return C({writable:t});if(l(t))return C({writable:!1,readable:!1});if("function"==typeof t){const{value:e,write:o,final:i,destroy:a}=function(e){let{promise:t,resolve:n}=w();const o=new E,i=o.signal,a=e(async function*(){for(;;){const e=t;t=null;const{chunk:o,done:a,cb:s}=await e;if(r.nextTick(s),a)return;if(i.aborted)throw new p(void 0,{cause:i.reason});({promise:t,resolve:n}=w()),yield o}}(),{signal:i});return{value:a,write(e,t,r){const o=n;n=null,o({chunk:e,done:!1,cb:r})},final(e){const t=n;n=null,t({done:!0,cb:e})},destroy(e,t){o.abort(),t(e)}}}(t);if(s(e))return v(A,e,{objectMode:!0,write:o,final:i,destroy:a});const l=null==e?void 0:e.then;if("function"==typeof l){let t;const n=_(l,e,e=>{if(null!=e)throw new m("nully","body",e)},e=>{g(t,e)});return t=new A({objectMode:!0,readable:!1,write:o,final(e){i(async()=>{try{await n,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}})},destroy:a})}throw new m("Iterable, AsyncIterable or AsyncFunction",n,e)}if(k(t))return e(t.arrayBuffer());if(s(t))return v(A,t,{objectMode:!0,writable:!1});if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable)){return C({readable:null!=t&&t.readable?u(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?c(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0})}const o=null==t?void 0:t.then;if("function"==typeof o){let e;return _(o,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{g(e,t)}),e=new A({objectMode:!0,writable:!1,read(){}})}throw new h(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},{"../../ours/errors":26,"../../ours/primordials":27,"../../ours/util":28,"./destroy":10,"./duplex":11,"./end-of-stream":13,"./from":14,"./readable":19,"./utils":22,"abort-controller":1,buffer:3,"process/":31}],13:[function(e,t,n){const r=e("process/"),{AbortError:o,codes:i}=e("../../ours/errors"),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=i,{kEmptyObject:l,once:u}=e("../../ours/util"),{validateAbortSignal:c,validateFunction:d,validateObject:f,validateBoolean:p}=e("../validators"),{Promise:h,PromisePrototypeThen:m}=e("../../ours/primordials"),{isClosed:g,isReadable:b,isReadableNodeStream:y,isReadableStream:w,isReadableFinished:v,isReadableErrored:S,isWritable:k,isWritableNodeStream:E,isWritableStream:_,isWritableFinished:A,isWritableErrored:C,isNodeStream:R,willEmitClose:T,kIsClosedPromise:L}=e("./utils");const B=()=>{};function I(e,t,n){var i,p;if(2===arguments.length?(n=t,t=l):null==t?t=l:f(t,"options"),d(n,"callback"),c(t.signal,"options.signal"),n=u(n),w(e)||_(e))return function(e,t,n){let i=!1,a=B;if(t.signal)if(a=()=>{i=!0,n.call(e,new o(void 0,{cause:t.signal.reason}))},t.signal.aborted)r.nextTick(a);else{const r=n;n=u((...n)=>{t.signal.removeEventListener("abort",a),r.apply(e,n)}),t.signal.addEventListener("abort",a)}const s=(...t)=>{i||r.nextTick(()=>n.apply(e,t))};return m(e[L].promise,s,s),B}(e,t,n);if(!R(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);const h=null!==(i=t.readable)&&void 0!==i?i:y(e),I=null!==(p=t.writable)&&void 0!==p?p:E(e),x=e._writableState,D=e._readableState,P=()=>{e.writable||N()};let M=T(e)&&y(e)===h&&E(e)===I,O=A(e,!1);const N=()=>{O=!0,e.destroyed&&(M=!1),(!M||e.readable&&!h)&&(h&&!G||n.call(e))};let G=v(e,!1);const j=()=>{G=!0,e.destroyed&&(M=!1),(!M||e.writable&&!I)&&(I&&!O||n.call(e))},U=t=>{n.call(e,t)};let W=g(e);const F=()=>{W=!0;const t=C(e)||S(e);return t&&"boolean"!=typeof t?n.call(e,t):h&&!G&&y(e,!0)&&!v(e,!1)?n.call(e,new s):!I||O||A(e,!1)?void n.call(e):n.call(e,new s)},$=()=>{W=!0;const t=C(e)||S(e);if(t&&"boolean"!=typeof t)return n.call(e,t);n.call(e)},H=()=>{e.req.on("finish",N)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?I&&!x&&(e.on("end",P),e.on("close",P)):(e.on("complete",N),M||e.on("abort",F),e.req?H():e.on("request",H)),M||"boolean"!=typeof e.aborted||e.on("aborted",F),e.on("end",j),e.on("finish",N),!1!==t.error&&e.on("error",U),e.on("close",F),W?r.nextTick(F):null!=x&&x.errorEmitted||null!=D&&D.errorEmitted?M||r.nextTick($):(h||M&&!b(e)||!O&&!1!==k(e))&&(I||M&&!k(e)||!G&&!1!==b(e))?D&&e.req&&e.aborted&&r.nextTick($):r.nextTick($);const V=()=>{n=B,e.removeListener("aborted",F),e.removeListener("complete",N),e.removeListener("abort",F),e.removeListener("request",H),e.req&&e.req.removeListener("finish",N),e.removeListener("end",P),e.removeListener("close",P),e.removeListener("finish",N),e.removeListener("end",j),e.removeListener("error",U),e.removeListener("close",F)};if(t.signal&&!W){const i=()=>{const r=n;V(),r.call(e,new o(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)r.nextTick(i);else{const r=n;n=u((...n)=>{t.signal.removeEventListener("abort",i),r.apply(e,n)}),t.signal.addEventListener("abort",i)}}return V}t.exports=I,t.exports.finished=function(e,t){var n;let r=!1;return null===t&&(t=l),null!==(n=t)&&void 0!==n&&n.cleanup&&(p(t.cleanup,"cleanup"),r=t.cleanup),new h((n,o)=>{const i=I(e,t,e=>{r&&i(),e?o(e):n()})})}},{"../../ours/errors":26,"../../ours/primordials":27,"../../ours/util":28,"../validators":24,"./utils":22,"process/":31}],14:[function(e,t,n){"use strict";const r=e("process/"),{PromisePrototypeThen:o,SymbolAsyncIterator:i,SymbolIterator:a}=e("../../ours/primordials"),{Buffer:s}=e("buffer"),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:u}=e("../../ours/errors").codes;t.exports=function(e,t,n){let c,d;if("string"==typeof t||t instanceof s)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});if(t&&t[i])d=!0,c=t[i]();else{if(!t||!t[a])throw new l("iterable",["Iterable"],t);d=!1,c=t[a]()}const f=new e({objectMode:!0,highWaterMark:1,...n});let p=!1;return f._read=function(){p||(p=!0,async function(){for(;;){try{const{value:e,done:t}=d?await c.next():c.next();if(t)f.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw p=!1,new u;if(f.push(t))continue;p=!1}}catch(e){f.destroy(e)}break}}())},f._destroy=function(e,t){o(async function(e){const t=null!=e,n="function"==typeof c.throw;if(t&&n){const{value:t,done:n}=await c.throw(e);if(await t,n)return}if("function"==typeof c.return){const{value:e}=await c.return();await e}}(e),()=>r.nextTick(t,e),n=>r.nextTick(t,n||e))},f}},{"../../ours/errors":26,"../../ours/primordials":27,buffer:3,"process/":31}],15:[function(e,t,n){"use strict";const{ArrayIsArray:r,ObjectSetPrototypeOf:o}=e("../../ours/primordials"),{EventEmitter:i}=e("events");function a(e){i.call(this,e)}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}o(a.prototype,i.prototype),o(a,i),a.prototype.pipe=function(e,t){const n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",l),n.on("close",u));let a=!1;function l(){a||(a=!0,e.end())}function u(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){d(),0===i.listenerCount(this,"error")&&this.emit("error",e)}function d(){n.removeListener("data",r),e.removeListener("drain",o),n.removeListener("end",l),n.removeListener("close",u),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return s(n,"error",c),s(e,"error",c),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e},t.exports={Stream:a,prependListener:s}},{"../../ours/primordials":27,events:4}],16:[function(e,t,n){"use strict";const r=globalThis.AbortController||e("abort-controller").AbortController,{codes:{ERR_INVALID_ARG_VALUE:o,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:l}=e("../../ours/errors"),{validateAbortSignal:u,validateInteger:c,validateObject:d}=e("../validators"),f=e("../../ours/primordials").Symbol("kWeak"),{finished:p}=e("./end-of-stream"),h=e("./compose"),{addAbortSignalNoValidate:m}=e("./add-abort-signal"),{isWritable:g,isNodeStream:b}=e("./utils"),{ArrayPrototypePush:y,MathFloor:w,Number:v,NumberIsNaN:S,Promise:k,PromiseReject:E,PromisePrototypeThen:_,Symbol:A}=e("../../ours/primordials"),C=A("kEmpty"),R=A("kEof");function T(e,t){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal");let n=1;return null!=(null==t?void 0:t.concurrency)&&(n=w(t.concurrency)),c(n,"concurrency",1),async function*(){var o,i;const a=new r,s=this,u=[],c=a.signal,d={signal:c},f=()=>a.abort();let p,h;null!=t&&null!==(o=t.signal)&&void 0!==o&&o.aborted&&f(),null==t||null===(i=t.signal)||void 0===i||i.addEventListener("abort",f);let m=!1;function g(){m=!0}!async function(){try{for await(let t of s){var r;if(m)return;if(c.aborted)throw new l;try{t=e(t,d)}catch(e){t=E(e)}t!==C&&("function"==typeof(null===(r=t)||void 0===r?void 0:r.catch)&&t.catch(g),u.push(t),p&&(p(),p=null),!m&&u.length&&u.length>=n&&await new k(e=>{h=e}))}u.push(R)}catch(e){const t=E(e);_(t,void 0,g),u.push(t)}finally{var o;m=!0,p&&(p(),p=null),null==t||null===(o=t.signal)||void 0===o||o.removeEventListener("abort",f)}}();try{for(;;){for(;u.length>0;){const e=await u[0];if(e===R)return;if(c.aborted)throw new l;e!==C&&(yield e),u.shift(),h&&(h(),h=null)}await new k(e=>{p=e})}}finally{a.abort(),m=!0,h&&(h(),h=null)}}.call(this)}async function L(e,t=void 0){for await(const n of B.call(this,e,t))return!0;return!1}function B(e,t){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);return T.call(this,async function(t,n){return await e(t,n)?t:C},t)}class I extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function x(e){if(e=v(e),S(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}t.exports.streamReturningOperators={asIndexedPairs:function(e=void 0){return null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&u(e.signal,"options.signal"),async function*(){let t=0;for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new l({cause:e.signal.reason});yield[t++,r]}}.call(this)},drop:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal"),e=x(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;e--<=0&&(yield n)}}.call(this)},filter:B,flatMap:function(e,t){const n=T.call(this,e,t);return async function*(){for await(const e of n)yield*e}.call(this)},map:T,take:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal"),e=x(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;if(!(e-- >0))return;yield n}}.call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal"),b(e)&&!g(e))throw new o("stream",e,"must be writable");const n=h(this,e);return null!=t&&t.signal&&m(t.signal,n),n}},t.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);return!await L.call(this,async(...t)=>!await e(...t),t)},forEach:async function(e,t){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);for await(const n of T.call(this,async function(t,n){return await e(t,n),C},t));},reduce:async function(e,t,n){var o;if("function"!=typeof e)throw new i("reducer",["Function","AsyncFunction"],e);null!=n&&d(n,"options"),null!=(null==n?void 0:n.signal)&&u(n.signal,"options.signal");let a=arguments.length>1;if(null!=n&&null!==(o=n.signal)&&void 0!==o&&o.aborted){const e=new l(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await p(this.destroy(e)),e}const s=new r,c=s.signal;if(null!=n&&n.signal){const e={once:!0,[f]:this};n.signal.addEventListener("abort",()=>s.abort(),e)}let h=!1;try{for await(const r of this){var m;if(h=!0,null!=n&&null!==(m=n.signal)&&void 0!==m&&m.aborted)throw new l;a?t=await e(t,r,{signal:c}):(t=r,a=!0)}if(!h&&!a)throw new I}finally{s.abort()}return t},toArray:async function(e){null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&u(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new l(void 0,{cause:e.signal.reason});y(t,r)}return t},some:L,find:async function(e,t){for await(const n of B.call(this,e,t))return n}}},{"../../ours/errors":26,"../../ours/primordials":27,"../validators":24,"./add-abort-signal":7,"./compose":9,"./end-of-stream":13,"./utils":22,"abort-controller":1}],17:[function(e,t,n){"use strict";const{ObjectSetPrototypeOf:r}=e("../../ours/primordials");t.exports=i;const o=e("./transform");function i(e){if(!(this instanceof i))return new i(e);o.call(this,e)}r(i.prototype,o.prototype),r(i,o),i.prototype._transform=function(e,t,n){n(null,e)}},{"../../ours/primordials":27,"./transform":21}],18:[function(e,t,n){const r=e("process/"),{ArrayIsArray:o,Promise:i,SymbolAsyncIterator:a}=e("../../ours/primordials"),s=e("./end-of-stream"),{once:l}=e("../../ours/util"),u=e("./destroy"),c=e("./duplex"),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:g},AbortError:b}=e("../../ours/errors"),{validateFunction:y,validateAbortSignal:w}=e("../validators"),{isIterable:v,isReadable:S,isReadableNodeStream:k,isNodeStream:E,isTransformStream:_,isWebStream:A,isReadableStream:C,isReadableEnded:R}=e("./utils"),T=globalThis.AbortController||e("abort-controller").AbortController;let L,B;function I(e,t,n){let r=!1;e.on("close",()=>{r=!0});return{destroy:t=>{r||(r=!0,u.destroyer(e,t||new m("pipe")))},cleanup:s(e,{readable:t,writable:n},e=>{r=!e})}}function x(t){if(v(t))return t;if(k(t))return async function*(t){B||(B=e("./readable"));yield*B.prototype[a].call(t)}(t);throw new f("val",["Readable","Iterable","AsyncIterable"],t)}async function D(e,t,n,{end:r}){let o,a=null;const l=e=>{if(e&&(o=e),a){const e=a;a=null,e()}},u=()=>new i((e,t)=>{o?t(o):a=()=>{o?t(o):e()}});t.on("drain",l);const c=s(t,{readable:!1},l);try{t.writableNeedDrain&&await u();for await(const n of e)t.write(n)||await u();r&&t.end(),await u(),n()}catch(e){n(o!==e?d(o,e):e)}finally{c(),t.off("drain",l)}}async function P(e,t,n,{end:r}){_(t)&&(t=t.writable);const o=t.getWriter();try{for await(const t of e)await o.ready,o.write(t).catch(()=>{});await o.ready,r&&await o.close(),n()}catch(e){try{await o.abort(e),n(e)}catch(e){n(e)}}}function M(t,n,i){if(1===t.length&&o(t[0])&&(t=t[0]),t.length<2)throw new h("streams");const a=new T,s=a.signal,l=null==i?void 0:i.signal,u=[];function d(){N(new b)}let m,g;w(l,"options.signal"),null==l||l.addEventListener("abort",d);const y=[];let R,B=0;function M(e){N(e,0===--B)}function N(e,t){if(!e||m&&"ERR_STREAM_PREMATURE_CLOSE"!==m.code||(m=e),m||t){for(;y.length;)y.shift()(m);null==l||l.removeEventListener("abort",d),a.abort(),t&&(m||u.forEach(e=>e()),r.nextTick(n,m,g))}}for(let W=0;W<t.length;W++){const F=t[W],$=W<t.length-1,H=W>0,V=$||!1!==(null==i?void 0:i.end),q=W===t.length-1;if(E(F)){if(V){const{destroy:z,cleanup:J}=I(F,$,H);y.push(z),S(F)&&q&&u.push(J)}function G(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&M(e)}F.on("error",G),S(F)&&q&&u.push(()=>{F.removeListener("error",G)})}if(0===W)if("function"==typeof F){if(R=F({signal:s}),!v(R))throw new p("Iterable, AsyncIterable or Stream","source",R)}else R=v(F)||k(F)||_(F)?F:c.from(F);else if("function"==typeof F){var j;if(_(R))R=x(null===(j=R)||void 0===j?void 0:j.readable);else R=x(R);if(R=F(R,{signal:s}),$){if(!v(R,!0))throw new p("AsyncIterable",`transform[${W-1}]`,R)}else{var U;L||(L=e("./passthrough"));const Y=new L({objectMode:!0}),K=null===(U=R)||void 0===U?void 0:U.then;if("function"==typeof K)B++,K.call(R,e=>{g=e,null!=e&&Y.write(e),V&&Y.end(),r.nextTick(M)},e=>{Y.destroy(e),r.nextTick(M,e)});else if(v(R,!0))B++,D(R,Y,M,{end:V});else{if(!C(R)&&!_(R))throw new p("AsyncIterable or Promise","destination",R);{const Z=R.readable||R;B++,D(Z,Y,M,{end:V})}}R=Y;const{destroy:X,cleanup:Q}=I(R,!1,!0);y.push(X),q&&u.push(Q)}}else if(E(F)){if(k(R)){B+=2;const ee=O(R,F,M,{end:V});S(F)&&q&&u.push(ee)}else if(_(R)||C(R)){const te=R.readable||R;B++,D(te,F,M,{end:V})}else{if(!v(R))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);B++,D(R,F,M,{end:V})}R=F}else if(A(F)){if(k(R))B++,P(x(R),F,M,{end:V});else if(C(R)||v(R))B++,P(R,F,M,{end:V});else{if(!_(R))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);B++,P(R.readable,F,M,{end:V})}R=F}else R=c.from(F)}return(null!=s&&s.aborted||null!=l&&l.aborted)&&r.nextTick(d),R}function O(e,t,n,{end:o}){let i=!1;if(t.on("close",()=>{i||n(new g)}),e.pipe(t,{end:!1}),o){function a(){i=!0,t.end()}R(e)?r.nextTick(a):e.once("end",a)}else n();return s(e,{readable:!0,writable:!1},t=>{const r=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?e.once("end",n).once("error",n):n(t)}),s(t,{readable:!1,writable:!0},n)}t.exports={pipelineImpl:M,pipeline:function(...e){return M(e,l(function(e){return y(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},{"../../ours/errors":26,"../../ours/primordials":27,"../../ours/util":28,"../validators":24,"./destroy":10,"./duplex":11,"./end-of-stream":13,"./passthrough":17,"./readable":19,"./utils":22,"abort-controller":1,"process/":31}],19:[function(e,t,n){const r=e("process/"),{ArrayPrototypeIndexOf:o,NumberIsInteger:i,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:l,ObjectKeys:u,ObjectSetPrototypeOf:c,Promise:d,SafeSet:f,SymbolAsyncIterator:p,Symbol:h}=e("../../ours/primordials");t.exports=j,j.ReadableState=G;const{EventEmitter:m}=e("events"),{Stream:g,prependListener:b}=e("./legacy"),{Buffer:y}=e("buffer"),{addAbortSignal:w}=e("./add-abort-signal"),v=e("./end-of-stream");let S=e("../../ours/util").debuglog("stream",e=>{S=e});const k=e("./buffer_list"),E=e("./destroy"),{getHighWaterMark:_,getDefaultHighWaterMark:A}=e("./state"),{aggregateTwoErrors:C,codes:{ERR_INVALID_ARG_TYPE:R,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_OUT_OF_RANGE:L,ERR_STREAM_PUSH_AFTER_EOF:B,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:I}}=e("../../ours/errors"),{validateObject:x}=e("../validators"),D=h("kPaused"),{StringDecoder:P}=e("string_decoder"),M=e("./from");c(j.prototype,g.prototype),c(j,g);const O=()=>{},{errorOrDestroy:N}=E;function G(t,n,r){"boolean"!=typeof r&&(r=n instanceof e("./duplex")),this.objectMode=!(!t||!t.objectMode),r&&(this.objectMode=this.objectMode||!(!t||!t.readableObjectMode)),this.highWaterMark=t?_(this,t,"readableHighWaterMark",r):A(!1),this.buffer=new k,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[D]=null,this.errorEmitted=!1,this.emitClose=!t||!1!==t.emitClose,this.autoDestroy=!t||!1!==t.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new P(t.encoding),this.encoding=t.encoding)}function j(t){if(!(this instanceof j))return new j(t);const n=this instanceof e("./duplex");this._readableState=new G(t,this,n),t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.construct&&(this._construct=t.construct),t.signal&&!n&&w(t.signal,this)),g.call(this,t),E.construct(this,()=>{this._readableState.needReadable&&V(this,this._readableState)})}function U(e,t,n,r){S("readableAddChunk",t);const o=e._readableState;let i;if(o.objectMode||("string"==typeof t?(n=n||o.defaultEncoding,o.encoding!==n&&(r&&o.encoding?t=y.from(t,n).toString(o.encoding):(t=y.from(t,n),n=""))):t instanceof y?n="":g._isUint8Array(t)?(t=g._uint8ArrayToBuffer(t),n=""):null!=t&&(i=new R("chunk",["string","Buffer","Uint8Array"],t))),i)N(e,i);else if(null===t)o.reading=!1,function(e,t){if(S("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?$(e):(t.needReadable=!1,t.emittedReadable=!0,H(e))}(e,o);else if(o.objectMode||t&&t.length>0)if(r)if(o.endEmitted)N(e,new I);else{if(o.destroyed||o.errored)return!1;W(e,o,t,!0)}else if(o.ended)N(e,new B);else{if(o.destroyed||o.errored)return!1;o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?W(e,o,t,!1):V(e,o)):W(e,o,t,!1)}else r||(o.reading=!1,V(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function W(e,t,n,r){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&$(e)),V(e,t)}j.prototype.destroy=E.destroy,j.prototype._undestroy=E.undestroy,j.prototype._destroy=function(e,t){t(e)},j.prototype[m.captureRejectionSymbol]=function(e){this.destroy(e)},j.prototype.push=function(e,t){return U(this,e,t,!1)},j.prototype.unshift=function(e,t){return U(this,e,t,!0)},j.prototype.isPaused=function(){const e=this._readableState;return!0===e[D]||!1===e.flowing},j.prototype.setEncoding=function(e){const t=new P(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const e of n)r+=t.write(e);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this};function F(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function $(e){const t=e._readableState;S("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(S("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(H,e))}function H(e){const t=e._readableState;S("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,K(e)}function V(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(q,e,t))}function q(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const n=t.length;if(S("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function z(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[D]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function J(e){S("readable nexttick read 0"),e.read(0)}function Y(e,t){S("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),K(e),t.flowing&&!t.reading&&e.read(0)}function K(e){const t=e._readableState;for(S("flow",t.flowing);t.flowing&&null!==e.read(););}function X(e,t){"function"!=typeof e.read&&(e=j.wrap(e,{objectMode:!0}));const n=async function*(e,t){let n,r=O;function o(t){this===e?(r(),r=O):r=t}e.on("readable",o);const i=v(e,{writable:!1},e=>{n=e?C(n,e):null,r(),r=O});try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(n)throw n;if(null===n)return;await new d(o)}}}catch(e){throw n=C(n,e),n}finally{!n&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==n&&!e._readableState.autoDestroy?(e.off("readable",o),i()):E.destroyer(e,null)}}(e,t);return n.stream=e,n}function Q(e,t){if(0===t.length)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function Z(e){const t=e._readableState;S("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(ee,t,e))}function ee(e,t){if(S("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(te,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function te(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ne;function re(){return void 0===ne&&(ne={}),ne}j.prototype.read=function(e){S("read",e),void 0===e?e=NaN:i(e)||(e=s(e,10));const t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new L("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return S("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Z(this):$(this),null;if(0===(e=F(e,t))&&t.ended)return 0===t.length&&Z(this),null;let r,o=t.needReadable;if(S("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&(o=!0,S("length less than watermark",o)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)o=!1,S("reading, ended or constructing",o);else if(o){S("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0);try{this._read(t.highWaterMark)}catch(e){N(this,e)}t.sync=!1,t.reading||(e=F(n,t))}return r=e>0?Q(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&Z(this)),null===r||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",r)),r},j.prototype._read=function(e){throw new T("_read()")},j.prototype.pipe=function(e,t){const n=this,o=this._readableState;1===o.pipes.length&&(o.multiAwaitDrain||(o.multiAwaitDrain=!0,o.awaitDrainWriters=new f(o.awaitDrainWriters?[o.awaitDrainWriters]:[]))),o.pipes.push(e),S("pipe count=%d opts=%j",o.pipes.length,t);const i=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?s:g;function a(t,r){S("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,function(){S("cleanup"),e.removeListener("close",h),e.removeListener("finish",m),l&&e.removeListener("drain",l);e.removeListener("error",p),e.removeListener("unpipe",a),n.removeListener("end",s),n.removeListener("end",g),n.removeListener("data",d),u=!0,l&&o.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&l()}())}function s(){S("onend"),e.end()}let l;o.endEmitted?r.nextTick(i):n.once("end",i),e.on("unpipe",a);let u=!1;function c(){u||(1===o.pipes.length&&o.pipes[0]===e?(S("false write response, pause",0),o.awaitDrainWriters=e,o.multiAwaitDrain=!1):o.pipes.length>1&&o.pipes.includes(e)&&(S("false write response, pause",o.awaitDrainWriters.size),o.awaitDrainWriters.add(e)),n.pause()),l||(l=function(e,t){return function(){const n=e._readableState;n.awaitDrainWriters===t?(S("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(S("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(n,e),e.on("drain",l))}function d(t){S("ondata");const n=e.write(t);S("dest.write",n),!1===n&&c()}function p(t){if(S("onerror",t),g(),e.removeListener("error",p),0===e.listenerCount("error")){const n=e._writableState||e._readableState;n&&!n.errorEmitted?N(e,t):e.emit("error",t)}}function h(){e.removeListener("finish",m),g()}function m(){S("onfinish"),e.removeListener("close",h),g()}function g(){S("unpipe"),n.unpipe(e)}return n.on("data",d),b(e,"error",p),e.once("close",h),e.once("finish",m),e.emit("pipe",n),!0===e.writableNeedDrain?o.flowing&&c():o.flowing||(S("pipe resume"),n.resume()),e},j.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const n=o(t.pipes,e);return-1===n||(t.pipes.splice(n,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},j.prototype.on=function(e,t){const n=g.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,S("on readable",o.length,o.reading),o.length?$(this):o.reading||r.nextTick(J,this))),n},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(e,t){const n=g.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(z,this),n},j.prototype.off=j.prototype.removeListener,j.prototype.removeAllListeners=function(e){const t=g.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(z,this),t},j.prototype.resume=function(){const e=this._readableState;return e.flowing||(S("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(Y,e,t))}(this,e)),e[D]=!1,this},j.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[D]=!0,this},j.prototype.wrap=function(e){let t=!1;e.on("data",n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{N(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const n=u(e);for(let t=1;t<n.length;t++){const r=n[t];void 0===this[r]&&"function"==typeof e[r]&&(this[r]=e[r].bind(e))}return this},j.prototype[p]=function(){return X(this)},j.prototype.iterator=function(e){return void 0!==e&&x(e,"options"),X(this,e)},l(j.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),l(G.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[D]},set(e){this[D]=!!e}}}),j._fromList=Q,j.from=function(e,t){return M(j,e,t)},j.fromWeb=function(e,t){return re().newStreamReadableFromReadableStream(e,t)},j.toWeb=function(e,t){return re().newReadableStreamFromStreamReadable(e,t)},j.wrap=function(e,t){var n,r;return new j({objectMode:null===(n=null!==(r=e.readableObjectMode)&&void 0!==r?r:e.objectMode)||void 0===n||n,...t,destroy(t,n){E.destroyer(e,t),n(t)}}).wrap(e)}},{"../../ours/errors":26,"../../ours/primordials":27,"../../ours/util":28,"../validators":24,"./add-abort-signal":7,"./buffer_list":8,"./destroy":10,"./duplex":11,"./end-of-stream":13,"./from":14,"./legacy":15,"./state":20,buffer:3,events:4,"process/":31,string_decoder:33}],20:[function(e,t,n){"use strict";const{MathFloor:r,NumberIsInteger:o}=e("../../ours/primordials"),{ERR_INVALID_ARG_VALUE:i}=e("../../ours/errors").codes;function a(e){return e?16:16384}t.exports={getHighWaterMark:function(e,t,n,s){const l=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,s,n);if(null!=l){if(!o(l)||l<0){throw new i(s?`options.${n}`:"options.highWaterMark",l)}return r(l)}return a(e.objectMode)},getDefaultHighWaterMark:a}},{"../../ours/errors":26,"../../ours/primordials":27}],21:[function(e,t,n){"use strict";const{ObjectSetPrototypeOf:r,Symbol:o}=e("../../ours/primordials");t.exports=u;const{ERR_METHOD_NOT_IMPLEMENTED:i}=e("../../ours/errors").codes,a=e("./duplex"),{getHighWaterMark:s}=e("./state");r(u.prototype,a.prototype),r(u,a);const l=o("kCallback");function u(e){if(!(this instanceof u))return new u(e);const t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),a.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function c(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,n)=>{t?e?e(t):this.destroy(t):(null!=n&&this.push(n),this.push(null),e&&e())})}function d(){this._final!==c&&c.call(this)}u.prototype._final=c,u.prototype._transform=function(e,t,n){throw new i("_transform()")},u.prototype._write=function(e,t,n){const r=this._readableState,o=this._writableState,i=r.length;this._transform(e,t,(e,t)=>{e?n(e):(null!=t&&this.push(t),o.ended||i===r.length||r.length<r.highWaterMark?n():this[l]=n)})},u.prototype._read=function(){if(this[l]){const e=this[l];this[l]=null,e()}}},{"../../ours/errors":26,"../../ours/primordials":27,"./duplex":11,"./state":20}],22:[function(e,t,n){"use strict";const{Symbol:r,SymbolAsyncIterator:o,SymbolIterator:i,SymbolFor:a}=e("../../ours/primordials"),s=r("kDestroyed"),l=r("kIsErrored"),u=r("kIsReadable"),c=r("kIsDisturbed"),d=a("nodejs.webstream.isClosedPromise"),f=a("nodejs.webstream.controllerErrorFunction");function p(e,t=!1){var n;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(n=e._readableState)||void 0===n?void 0:n.readable)||e._writableState&&!e._readableState)}function h(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function m(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!(!e||m(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function b(e){return!(!e||m(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function y(e){return!(!e||m(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function w(e){if(!m(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[s]||null!=r&&r.destroyed)}function v(e){if(!h(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function S(e,t){if(!p(e))return null;const n=e._readableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===t&&!0===n.ended&&0===n.length))}function k(e){return e&&null!=e[u]?e[u]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!w(e)&&(p(e)&&e.readable&&!S(e))}function E(e){return"boolean"!=typeof(null==e?void 0:e.writable)?null:!w(e)&&(h(e)&&e.writable&&!v(e))}function _(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function A(e){return"boolean"==typeof e._sent100&&_(e)}t.exports={kDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[c])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:c,isErrored:function(e){var t,n,r,o,i,a,s,u,c,d;return!(!e||!(null!==(t=null!==(n=null!==(r=null!==(o=null!==(i=null!==(a=e[l])&&void 0!==a?a:e.readableErrored)&&void 0!==i?i:e.writableErrored)&&void 0!==o?o:null===(s=e._readableState)||void 0===s?void 0:s.errorEmitted)&&void 0!==r?r:null===(u=e._writableState)||void 0===u?void 0:u.errorEmitted)&&void 0!==n?n:null===(c=e._readableState)||void 0===c?void 0:c.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:l,isReadable:k,kIsReadable:u,kIsClosedPromise:d,kControllerErrorFunction:f,isClosed:function(e){if(!m(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,n=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==n?void 0:n.closed)?(null==t?void 0:t.closed)||(null==n?void 0:n.closed):"boolean"==typeof e._closed&&_(e)?e._closed:null},isDestroyed:w,isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return m(e)?!!w(e)||(!1===(null==t?void 0:t.readable)||!k(e))&&(!1===(null==t?void 0:t.writable)||!E(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[o]:!1===t?"function"==typeof e[i]:"function"==typeof e[o]||"function"==typeof e[i])},isReadableNodeStream:p,isReadableStream:g,isReadableEnded:function(e){if(!p(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:S,isReadableErrored:function(e){var t,n;return m(e)?e.readableErrored?e.readableErrored:null!==(t=null===(n=e._readableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isNodeStream:m,isWebStream:function(e){return g(e)||b(e)||y(e)},isWritable:E,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:v,isWritableFinished:function(e,t){if(!h(e))return null;if(!0===e.writableFinished)return!0;const n=e._writableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.finished)?null:!!(n.finished||!1===t&&!0===n.ended&&0===n.length))},isWritableErrored:function(e){var t,n;return m(e)?e.writableErrored?e.writableErrored:null!==(t=null===(n=e._writableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:A,willEmitClose:function(e){if(!m(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&A(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:y}},{"../../ours/primordials":27}],23:[function(e,t,n){const r=e("process/"),{ArrayPrototypeSlice:o,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:l,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:c,Symbol:d,SymbolHasInstance:f}=e("../../ours/primordials");t.exports=P,P.WritableState=x;const{EventEmitter:p}=e("events"),h=e("./legacy").Stream,{Buffer:m}=e("buffer"),g=e("./destroy"),{addAbortSignal:b}=e("./add-abort-signal"),{getHighWaterMark:y,getDefaultHighWaterMark:w}=e("./state"),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:k,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:_,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:C,ERR_STREAM_WRITE_AFTER_END:R,ERR_UNKNOWN_ENCODING:T}=e("../../ours/errors").codes,{errorOrDestroy:L}=g;function B(){}u(P.prototype,h.prototype),u(P,h);const I=d("kOnFinished");function x(t,n,r){"boolean"!=typeof r&&(r=n instanceof e("./duplex")),this.objectMode=!(!t||!t.objectMode),r&&(this.objectMode=this.objectMode||!(!t||!t.writableObjectMode)),this.highWaterMark=t?y(this,t,"writableHighWaterMark",r):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const o=!(!t||!1!==t.decodeStrings);this.decodeStrings=!o,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,n),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,D(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||!1!==t.emitClose,this.autoDestroy=!t||!1!==t.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[I]=[]}function D(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function P(t){const n=this instanceof e("./duplex");if(!n&&!a(P,this))return new P(t);this._writableState=new x(t,this,n),t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final),"function"==typeof t.construct&&(this._construct=t.construct),t.signal&&b(t.signal,this)),h.call(this,t),g.construct(this,()=>{const e=this._writableState;e.writing||F(this,e),V(this,e)})}function M(e,t,n,o){const i=e._writableState;if("function"==typeof n)o=n,n=i.defaultEncoding;else{if(n){if("buffer"!==n&&!m.isEncoding(n))throw new T(n)}else n=i.defaultEncoding;"function"!=typeof o&&(o=B)}if(null===t)throw new C;if(!i.objectMode)if("string"==typeof t)!1!==i.decodeStrings&&(t=m.from(t,n),n="buffer");else if(t instanceof m)n="buffer";else{if(!h._isUint8Array(t))throw new v("chunk",["string","Buffer","Uint8Array"],t);t=h._uint8ArrayToBuffer(t),n="buffer"}let a;return i.ending?a=new R:i.destroyed&&(a=new _("write")),a?(r.nextTick(o,a),L(e,a,!0),a):(i.pendingcb++,function(e,t,n,r,o){const i=t.objectMode?1:n.length;t.length+=i;const a=t.length<t.highWaterMark;a||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:o}),t.allBuffers&&"buffer"!==r&&(t.allBuffers=!1),t.allNoop&&o!==B&&(t.allNoop=!1)):(t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1);return a&&!t.errored&&!t.destroyed}(e,i,t,n,o))}function O(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function N(e,t,n,r){--t.pendingcb,r(n),W(t),L(e,n)}function G(e,t){const n=e._writableState,o=n.sync,i=n.writecb;"function"==typeof i?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),o?r.nextTick(N,e,n,t,i):N(e,n,t,i)):(n.buffered.length>n.bufferedIndex&&F(e,n),o?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:e,state:n},r.nextTick(j,n.afterWriteTickInfo)):U(e,n,1,i))):L(e,new k)}function j({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,U(e,t,n,r)}function U(e,t,n,r){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));n-- >0;)t.pendingcb--,r();t.destroyed&&W(t),V(e,t)}function W(e){if(e.writing)return;for(let n=e.bufferedIndex;n<e.buffered.length;++n){var t;const{chunk:r,callback:o}=e.buffered[n],i=e.objectMode?1:r.length;e.length-=i,o(null!==(t=e.errored)&&void 0!==t?t:new _("write"))}const n=e[I].splice(0);for(let t=0;t<n.length;t++){var r;n[t](null!==(r=e.errored)&&void 0!==r?r:new _("end"))}D(e)}function F(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:n,bufferedIndex:r,objectMode:i}=t,a=n.length-r;if(!a)return;let s=r;if(t.bufferProcessing=!0,a>1&&e._writev){t.pendingcb-=a-1;const r=t.allNoop?B:e=>{for(let t=s;t<n.length;++t)n[t].callback(e)},i=t.allNoop&&0===s?n:o(n,s);i.allBuffers=t.allBuffers,O(e,t,!0,t.length,i,"",r),D(t)}else{do{const{chunk:r,encoding:o,callback:a}=n[s];n[s++]=null;O(e,t,!1,i?1:r.length,r,o,a)}while(s<n.length&&!t.writing);s===n.length?D(t):s>256?(n.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function $(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function H(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let n=!1;function o(o){if(n)L(e,null!=o?o:k());else if(n=!0,t.pendingcb--,o){const n=t[I].splice(0);for(let e=0;e<n.length;e++)n[e](o);L(e,o,t.sync)}else $(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(q,e,t))}t.sync=!0,t.pendingcb++;try{e._final(o)}catch(e){o(e)}t.sync=!1}(e,t)))}function V(e,t,n){$(t)&&(H(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick((e,t)=>{$(t)?q(e,t):t.pendingcb--},e,t)):$(t)&&(t.pendingcb++,q(e,t))))}function q(e,t){t.pendingcb--,t.finished=!0;const n=t[I].splice(0);for(let e=0;e<n.length;e++)n[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}x.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},s(x.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(P,f,{__proto__:null,value:function(e){return!!a(this,e)||this===P&&(e&&e._writableState instanceof x)}}),P.prototype.pipe=function(){L(this,new E)},P.prototype.write=function(e,t,n){return!0===M(this,e,t,n)},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||F(this,e))},P.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=c(e)),!m.isEncoding(e))throw new T(e);return this._writableState.defaultEncoding=e,this},P.prototype._write=function(e,t,n){if(!this._writev)throw new S("_write()");this._writev([{chunk:e,encoding:t}],n)},P.prototype._writev=null,P.prototype.end=function(e,t,n){const o=this._writableState;let a;if("function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e){const n=M(this,e,t);n instanceof i&&(a=n)}return o.corked&&(o.corked=1,this.uncork()),a||(o.errored||o.ending?o.finished?a=new A("end"):o.destroyed&&(a=new _("end")):(o.ending=!0,V(this,o,!0),o.ended=!0)),"function"==typeof n&&(a||o.finished?r.nextTick(n,a):o[I].push(n)),this},l(P.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const z=g.destroy;let J;function Y(){return void 0===J&&(J={}),J}P.prototype.destroy=function(e,t){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[I].length)&&r.nextTick(W,n),z.call(this,e,t),this},P.prototype._undestroy=g.undestroy,P.prototype._destroy=function(e,t){t(e)},P.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},P.fromWeb=function(e,t){return Y().newStreamWritableFromWritableStream(e,t)},P.toWeb=function(e){return Y().newWritableStreamFromStreamWritable(e)}},{"../../ours/errors":26,"../../ours/primordials":27,"./add-abort-signal":7,"./destroy":10,"./duplex":11,"./legacy":15,"./state":20,buffer:3,events:4,"process/":31}],24:[function(e,t,n){"use strict";const{ArrayIsArray:r,ArrayPrototypeIncludes:o,ArrayPrototypeJoin:i,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:c,NumberParseInt:d,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:p,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=e("../ours/primordials"),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:k}}=e("../ours/errors"),{normalizeEncoding:E}=e("../ours/util"),{isAsyncFunction:_,isArrayBufferView:A}=e("../ours/util").types,C={};const R=/^[0-7]+$/;const T=b((e,t,n=c,r=u)=>{if("number"!=typeof e)throw new w(t,"number",e);if(!s(e))throw new S(t,"an integer",e);if(e<n||e>r)throw new S(t,`>= ${n} && <= ${r}`,e)}),L=b((e,t,n=-2147483648,r=2147483647)=>{if("number"!=typeof e)throw new w(t,"number",e);if(!s(e))throw new S(t,"an integer",e);if(e<n||e>r)throw new S(t,`>= ${n} && <= ${r}`,e)}),B=b((e,t,n=!1)=>{if("number"!=typeof e)throw new w(t,"number",e);if(!s(e))throw new S(t,"an integer",e);const r=n?1:0,o=4294967295;if(e<r||e>o)throw new S(t,`>= ${r} && <= ${o}`,e)});function I(e,t){if("string"!=typeof e)throw new w(t,"string",e)}const x=b((e,t,n)=>{if(!o(n,e)){const r=i(a(n,e=>"string"==typeof e?`'${e}'`:h(e)),", ");throw new v(t,e,"must be one of: "+r)}});function D(e,t){if("boolean"!=typeof e)throw new w(t,"boolean",e)}function P(e,t,n){return null!=e&&f(e,t)?e[t]:n}const M=b((e,t,n=null)=>{const o=P(n,"allowArray",!1),i=P(n,"allowFunction",!1);if(!P(n,"nullable",!1)&&null===e||!o&&r(e)||"object"!=typeof e&&(!i||"function"!=typeof e))throw new w(t,"Object",e)}),O=b((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new w(t,"a dictionary",e)}),N=b((e,t,n=0)=>{if(!r(e))throw new w(t,"Array",e);if(e.length<n){throw new v(t,e,`must be longer than ${n}`)}});const G=b((e,t="buffer")=>{if(!A(e))throw new w(t,["Buffer","TypedArray","DataView"],e)});const j=b((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new w(t,"AbortSignal",e)}),U=b((e,t)=>{if("function"!=typeof e)throw new w(t,"Function",e)}),W=b((e,t)=>{if("function"!=typeof e||_(e))throw new w(t,"Function",e)}),F=b((e,t)=>{if(void 0!==e)throw new w(t,"undefined",e)});const $=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function H(e,t){if(void 0===e||!p($,e))throw new v(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,n){if(void 0===e&&(e=n),"string"==typeof e){if(null===p(R,e))throw new v(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return B(e,t),e},validateArray:N,validateStringArray:function(e,t){N(e,t);for(let n=0;n<e.length;n++)I(e[n],`${t}[${n}]`)},validateBooleanArray:function(e,t){N(e,t);for(let n=0;n<e.length;n++)D(e[n],`${t}[${n}]`)},validateBoolean:D,validateBuffer:G,validateDictionary:O,validateEncoding:function(e,t){const n=E(t),r=e.length;if("hex"===n&&r%2!=0)throw new v("encoding",t,`is invalid for data of length ${r}`)},validateFunction:U,validateInt32:L,validateInteger:T,validateNumber:function(e,t,n=void 0,r){if("number"!=typeof e)throw new w(t,"number",e);if(null!=n&&e<n||null!=r&&e>r||(null!=n||null!=r)&&l(e))throw new S(t,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,e)},validateObject:M,validateOneOf:x,validatePlainFunction:W,validatePort:function(e,t="Port",n=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===g(e).length||+e!==+e>>>0||e>65535||0===e&&!n)throw new y(t,e,n);return 0|e},validateSignalName:function(e,t="signal"){if(I(e,t),void 0===C[e]){if(void 0!==C[m(e)])throw new k(e+" (signals must use all capital letters)");throw new k(e)}},validateString:I,validateUint32:B,validateUndefined:F,validateUnion:function(e,t,n){if(!o(n,e))throw new w(t,`('${i(n,"|")}')`,e)},validateAbortSignal:j,validateLinkHeaderValue:function(e){if("string"==typeof e)return H(e,"hints"),e;if(r(e)){const t=e.length;let n="";if(0===t)return n;for(let r=0;r<t;r++){const o=e[r];H(o,"hints"),n+=o,r!==t-1&&(n+=", ")}return n}throw new v("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},{"../ours/errors":26,"../ours/primordials":27,"../ours/util":28}],25:[function(e,t,n){"use strict";const r=e("../stream"),o=e("../stream/promises"),i=r.Readable.destroy;t.exports=r.Readable,t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.destroy=i,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>o}),t.exports.Stream=r.Stream,t.exports.default=t.exports},{"../stream":29,"../stream/promises":30}],26:[function(e,t,n){"use strict";const{format:r,inspect:o,AggregateError:i}=e("./util"),a=globalThis.AggregateError||i,s=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,c={};function d(e,t){if(!e)throw new c.ERR_INTERNAL_ASSERTION(t)}function f(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function p(e,t,n){n||(n=Error);class o extends n{constructor(...n){super(function(e,t,n){if("function"==typeof t)return d(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const o=(t.match(/%[dfijoOs]/g)||[]).length;return d(o===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${o}).`),0===n.length?t:r(t,...n)}(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(o.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),o.prototype.code=e,o.prototype[s]=!0,c[e]=o}function h(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class m extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new c.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(e,t,n)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const i=[],a=[],s=[];for(const e of t)d("string"==typeof e,"All expected entries have to be of type string"),l.includes(e)?i.push(e.toLowerCase()):u.test(e)?a.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),s.push(e));if(a.length>0){const e=i.indexOf("object");-1!==e&&(i.splice(i,e,1),a.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{const e=i.pop();r+=`one of type ${i.join(", ")}, or ${e}`}}(a.length>0||s.length>0)&&(r+=" or ")}if(a.length>0){switch(a.length){case 1:r+=`an instance of ${a[0]}`;break;case 2:r+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();r+=`an instance of ${a.join(", ")}, or ${e}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();r+=`one of ${s.join(", ")}, or ${e}`}}if(null==n)r+=`. Received ${n}`;else if("function"==typeof n&&n.name)r+=`. Received function ${n.name}`;else if("object"==typeof n){var c;if(null!==(c=n.constructor)&&void 0!==c&&c.name)r+=`. Received an instance of ${n.constructor.name}`;else{r+=`. Received ${o(n,{depth:-1})}`}}else{let e=o(n,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),r+=`. Received type ${typeof n} (${e})`}return r},TypeError),p("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=o(t);r.length>128&&(r=r.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;return`Expected ${e} to be returned from the "${t}" function but got ${null!=n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n}.`},TypeError),p("ERR_MISSING_ARGS",(...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}}return`${t} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(e,t,n)=>{let r;return d(t,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>2**32?r=f(String(n)):"bigint"==typeof n?(r=String(n),(n>2n**32n||n<-(2n**32n))&&(r=f(r)),r+="n"):r=o(n),`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:m,aggregateTwoErrors:h(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new a([t,e],t.message);return n.code=t.code,n}return e||t}),hideStackFrames:h,codes:c}},{"./util":28}],27:[function(e,t,n){"use strict";t.exports={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,n)=>e.slice(t,n),Error:Error,FunctionPrototypeCall:(e,t,...n)=>e.call(t,...n),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,n)=>Object.defineProperty(e,t,n),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise:Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,n)=>e.then(t,n),PromiseReject:e=>Promise.reject(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String:String,StringPrototypeSlice:(e,t,n)=>e.slice(t,n),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(e,t,n)=>e.set(t,n),Uint8Array:Uint8Array}},{}],28:[function(e,t,n){"use strict";const r=e("buffer"),o=Object.getPrototypeOf(async function(){}).constructor,i=globalThis.Blob||r.Blob,a=void 0!==i?function(e){return e instanceof i}:function(e){return!1};class s extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}t.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}},promisify:e=>new Promise((t,n)=>{e((e,...r)=>e?n(e):t(...r))}),debuglog:()=>function(){},format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,n]){const r=t.shift();if("f"===n)return r.toFixed(6);if("j"===n)return JSON.stringify(r);if("s"===n&&"object"==typeof r){return`${r.constructor!==Object?r.constructor.name:""} {}`.trim()}return r.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof o,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:a},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},{buffer:3}],29:[function(e,t,n){const{Buffer:r}=e("buffer"),{ObjectDefineProperty:o,ObjectKeys:i,ReflectApply:a}=e("./ours/primordials"),{promisify:{custom:s}}=e("./ours/util"),{streamReturningOperators:l,promiseReturningOperators:u}=e("./internal/streams/operators"),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=e("./ours/errors"),d=e("./internal/streams/compose"),{pipeline:f}=e("./internal/streams/pipeline"),{destroyer:p}=e("./internal/streams/destroy"),h=e("./internal/streams/end-of-stream"),m=e("./stream/promises"),g=e("./internal/streams/utils"),b=t.exports=e("./internal/streams/legacy").Stream;b.isDisturbed=g.isDisturbed,b.isErrored=g.isErrored,b.isReadable=g.isReadable,b.Readable=e("./internal/streams/readable");for(const v of i(l)){const S=l[v];function y(...e){if(new.target)throw c();return b.Readable.from(a(S,this,e))}o(y,"name",{__proto__:null,value:S.name}),o(y,"length",{__proto__:null,value:S.length}),o(b.Readable.prototype,v,{__proto__:null,value:y,enumerable:!1,configurable:!0,writable:!0})}for(const k of i(u)){const E=u[k];function y(...e){if(new.target)throw c();return a(E,this,e)}o(y,"name",{__proto__:null,value:E.name}),o(y,"length",{__proto__:null,value:E.length}),o(b.Readable.prototype,k,{__proto__:null,value:y,enumerable:!1,configurable:!0,writable:!0})}b.Writable=e("./internal/streams/writable"),b.Duplex=e("./internal/streams/duplex"),b.Transform=e("./internal/streams/transform"),b.PassThrough=e("./internal/streams/passthrough"),b.pipeline=f;const{addAbortSignal:w}=e("./internal/streams/add-abort-signal");b.addAbortSignal=w,b.finished=h,b.destroy=p,b.compose=d,o(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>m}),o(f,s,{__proto__:null,enumerable:!0,get:()=>m.pipeline}),o(h,s,{__proto__:null,enumerable:!0,get:()=>m.finished}),b.Stream=b,b._isUint8Array=function(e){return e instanceof Uint8Array},b._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}},{"./internal/streams/add-abort-signal":7,"./internal/streams/compose":9,"./internal/streams/destroy":10,"./internal/streams/duplex":11,"./internal/streams/end-of-stream":13,"./internal/streams/legacy":15,"./internal/streams/operators":16,"./internal/streams/passthrough":17,"./internal/streams/pipeline":18,"./internal/streams/readable":19,"./internal/streams/transform":21,"./internal/streams/utils":22,"./internal/streams/writable":23,"./ours/errors":26,"./ours/primordials":27,"./ours/util":28,"./stream/promises":30,buffer:3}],30:[function(e,t,n){"use strict";const{ArrayPrototypePop:r,Promise:o}=e("../ours/primordials"),{isIterable:i,isNodeStream:a,isWebStream:s}=e("../internal/streams/utils"),{pipelineImpl:l}=e("../internal/streams/pipeline"),{finished:u}=e("../internal/streams/end-of-stream");e("../../lib/stream.js"),t.exports={finished:u,pipeline:function(...e){return new o((t,n)=>{let o,u;const c=e[e.length-1];if(c&&"object"==typeof c&&!a(c)&&!i(c)&&!s(c)){const t=r(e);o=t.signal,u=t.end}l(e,(e,r)=>{e?n(e):t(r)},{signal:o,end:u})})}}},{"../../lib/stream.js":29,"../internal/streams/end-of-stream":13,"../internal/streams/pipeline":18,"../internal/streams/utils":22,"../ours/primordials":27}],31:[function(e,t,n){var r,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var u,c=[],d=!1,f=-1;function p(){d&&u&&(d=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!d){var e=l(p);d=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||d||l(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],32:[function(e,t,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=e("buffer"),o=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,n),n.Buffer=a),a.prototype=Object.create(o.prototype),i(o,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:3}],33:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,o=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}n.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=a(t[r]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if(o=a(t[r]),o>=0)return o>0&&(e.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if(o=a(t[r]),o>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":32}],34:[function(e,t,n){(function(t,r){(function(){var o=e("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,s={},l=0;function u(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new u(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new u(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=l++,r=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,o(function(){s[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof r?r:function(e){delete s[e]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":31,timers:34}],35:[function(e,t,n){t.exports={name:"pokeclicker",version:"0.10.25",description:"PokClicker repository",main:"index.js",scripts:{start:"cross-env NODE_ENV=development gulp",build:"cross-env NODE_ENV=development gulp build",test:"npm-run-all --continue-on-error test-scripts eslint stylelint","test-scripts":"gulp scripts && npm run vitest-nocoverage",vitest:"vitest --run","vitest-nocoverage":"vitest --run --coverage false",eslint:"eslint --ext ts ./src/scripts ./src/modules","eslint-fix":"eslint --ext ts --fix ./src/scripts ./src/modules",stylelint:'stylelint "./src/**/*.less" --cache',"stylelint-fix":"npm run stylelint -- --fix",website:"npm run tl:update && npm test && cross-env NODE_ENV=production gulp website",publish:"npm test && node publish.js","tl:init":"git submodule update --init","tl:update":"git submodule update --remote",clean:"npm ci && npm run tl:init"},repository:{type:"git",url:"git+https://github.com/pokeclicker/pokeclicker.git"},babel:{presets:["@babel/preset-env"]},author:"RedSparr0w",license:"ISC",bugs:{url:"https://github.com/pokeclicker/pokeclicker/issues"},homepage:"https://github.com/pokeclicker/pokeclicker#readme",devDependencies:{"@babel/core":"^7.0.0","@babel/preset-env":"^7.0.0","@babel/register":"^7.0.0","@types/bootstrap":"^4.3.1","@types/bootstrap-notify":"^3.1.34","@types/intro.js":"^2.4.7","@types/jquery":"^3.5.16","@types/knockout":"^3.4.66","@types/sortablejs":"^1.10.5","@typescript-eslint/eslint-plugin":"^5.50.0","@typescript-eslint/parser":"^5.50.0","@vitest/coverage-v8":"^3.1.3","bootstrap-notify":"^3.1.3","browser-sync":"^3.0.2","cross-env":"^7.0.2",del:"^5.1.0","es6-promise":"^4.2.8",eslint:"^7.32.0","eslint-config-airbnb-typescript":"^17.0.0","eslint-plugin-import":"^2.22.1","gh-pages":"^6.1.1",gulp:"^4.0.2","gulp-autoprefixer":"^8.0.0","gulp-changed":"^4.0.2","gulp-clean":"^0.4.0","gulp-clean-css":"^4.3.0","gulp-concat":"^2.6.0","gulp-ejs":"^5.1.0","gulp-file-include":"^2.2.2","gulp-filter":"^6.0.0","gulp-less":"^5.0.0","gulp-plumber":"^1.2.1","gulp-rename":"^2.0.0","gulp-replace":"^1.0.0","gulp-size":"^3.0.0","gulp-sourcemaps":"^2.6.5","gulp-stream-to-promise":"^0.1.0","gulp-strip-debug":"^3.0.0","gulp-typescript":"^5.0.1",husky:"^4.3.8",jsdom:"^25.0.0","npm-run-all2":"^6.2.0","postcss-less":"^6.0.0",stylelint:"^15.10.1","stylelint-config-standard-less":"^1.0.0","ts-loader":"^8.0.4","ts-node":"^10.9.1",typescript:"^4.9.5",vitest:"^3.1.3",webpack:"^5.76.0","webpack-cli":"^5.0.1","webpack-stream":"^7.0.0"},dependencies:{bootstrap:"^4.5.3",i18next:"^21.9.2","i18next-browser-languagedetector":"^6.1.5","i18next-chained-backend":"^3.1.0","i18next-http-backend":"^1.4.4","intro.js":"^2.9.3",jquery:"^3.5.1",knockout:"^3.5.1","popper.js":"^1.16.0",sortablejs:"^1.10.2"},overrides:{"clean-css":">=5.3.1"}}},{}],36:[function(e,t,n){const r=ko.pureComputed(()=>{const e=SaveData.file(),t=e?.save.party.caughtPokemon??[],n=e?.save.statistics;return t.filter(e=>Companion.data.obtainablePokemonMap[e.id]).reduce((e,t)=>{const r=PokemonFactory.generatePartyPokemon(t.id);r.fromJSON(t),r.totalAttack=r.calculateAttack(100),r.baseBreedingEff=r.getBreedingAttackBonus()/r.getEggSteps()*GameConstants.EGG_CYCLE_MULTIPLIER;const o=r.heldItem&&r.heldItem()instanceof AttackBonusHeldItem?r.heldItem().attackBonus:1,i=r.shadow==GameConstants.ShadowStatus.Shadow?.8:r.shadow==GameConstants.ShadowStatus.Purified?1.2:1,a=r.getBreedingAttackBonus()*r.calculateEVAttackBonus()*o*i;return r.breedingEff=a/r.getEggSteps()*GameConstants.EGG_CYCLE_MULTIPLIER,r.statistics={totalObtained:n.pokemonCaptured[t.id]||0,totalHatched:n.pokemonHatched[t.id]||0,totalShinyObtained:n.shinyPokemonCaptured[t.id]||0,totalShinyHatched:n.shinyPokemonHatched[t.id]||0,totalDefeated:n.pokemonDefeated[t.id]||0},e[t.id]=r,e},{})}),o=ko.observable(""),i=ko.observable("none"),a=ko.observable("id"),s=ko.observable(!1),l=ko.pureComputed(()=>{const e=a(),t=s();return Object.values(r()).sort(function(e,t){return function(n,r){let o,i=t?-1:1;const a=V(e,n),s=V(e,r);return a==s?n.id-r.id:(o=a<s?-1:a>s?1:0,o*i)}}(e,t))}).extend({rateLimit:100}),u=ko.pureComputed(()=>{if(!SaveData.isLoaded())return[];const e=r(),t={...GameHelper.enumNumbers(GameConstants.Region).filter(e=>e!==GameConstants.Region.none&&e<=GameConstants.MAX_AVAILABLE_REGION).map(e=>({region:e,regionName:GameConstants.camelCaseToString(GameConstants.Region[e]),pokemon:[]}))},n=SaveData.file(),o=Companion.settings.showRequiredOnly(),i=Companion.settings.showAllRegions();return Companion.data.obtainablePokemonList.forEach(r=>{if(e[r.id])return;const a=r.obtainRegion;if(i||!(a>player.highestRegion())){if(o){if(-2==a)return;if(n.save.party.caughtPokemon.some(e=>Math.floor(e.id)==Math.floor(r.id)))return}t[a].pokemon.push(r)}}),Object.values(t).filter(e=>e.pokemon.length)}),c=e=>ko.pureComputed(()=>{const t=u().find(t=>t.region==e);return t?Companion.settings.showRequiredOnly()?new Set(t.pokemon.map(e=>Math.floor(e.id))).size:t.pokemon.length:0}),d=ko.pureComputed(()=>u().reduce((e,t)=>e+c(t.region)(),0)),f=ko.pureComputed(()=>SaveData.isLoaded()?SaveData.file().save.party.caughtPokemon.filter(e=>Companion.data.obtainablePokemonMap[e.id]).length:0),p=ko.pureComputed(()=>SaveData.isLoaded()?SaveData.file().save.party.caughtPokemon.filter(e=>Companion.data.obtainablePokemonMap[e.id]&&!0===e[PartyPokemonSaveKeys.shiny]).length:0),h=ko.pureComputed(()=>SaveData.isLoaded()?SaveData.file().save.party.caughtPokemon.filter(e=>Companion.data.obtainablePokemonMap[e.id]&&e[PartyPokemonSaveKeys.pokerus]===GameConstants.Pokerus.Resistant).length:0),m=e=>ko.pureComputed(()=>{const t=o();if(t&&!e.id.toString().includes(t)&&!e.name.toLowerCase().includes(t.toLowerCase()))return!0;const n=i();if(n){const t=e.pokerus===GameConstants.Pokerus.Resistant,r=FriendSafari.isInRotation(e.name);switch(n){case"not-shiny":if(e.shiny)return!0;break;case"not-resistant":if(t)return!0;break;case"not-resistant-not-friend-safari":if(t||r)return!0;break;case"not-resistant-friend-safari":if(t||!r)return!0;break;case"resistant":if(!t)return!0;break;case"infected":if(e.pokerus!=GameConstants.Pokerus.Infected)return!0;break;case"missing-shadow":if(e.shadow||!Companion.data.shadowPokemon.has(e.name))return!0;break;case"missing-purified":if(e.shadow==GameConstants.ShadowStatus.Purified||!Companion.data.shadowPokemon.has(e.name))return!0;break;case"shadow":if(e.shadow!=GameConstants.ShadowStatus.Shadow)return!0;break;case"purified":if(e.shadow!=GameConstants.ShadowStatus.Purified)return!0}}return!1}),g=ko.pureComputed(()=>Object.values(r()).reduce((e,t)=>m(t)()?e:e+1,0)),b=ko.pureComputed(()=>{const e=[],t=Companion.data.DungeonListOverride.map(e=>e.dungeons).flat();return GameConstants.RegionDungeons.forEach((n,r)=>{e.push({region:r,dungeons:n.filter(e=>!t.includes(e))})}),Companion.data.DungeonListOverride.forEach(t=>e.push({...t})),e.forEach(e=>{e.dungeons=e.dungeons.map(e=>{const t=w(e),n=dungeonList[e].tokenCost;return{name:e,clears:t,cost:n,remaining:Math.max(500*n-n*t,0),hide:TownList[e].requirements.some(e=>e instanceof DevelopmentRequirement)}}).filter(e=>!e.hide)}),e.filter(e=>e.region<=GameConstants.MAX_AVAILABLE_REGION).sort((e,t)=>e.region-t.region)}),y=ko.pureComputed(()=>b().flatMap(e=>e.dungeons)),w=e=>{if(!SaveData.isLoaded())return 0;const t=GameConstants.getDungeonIndex(e);return SaveData.file().save.statistics.dungeonsCleared[t]||0},v=ko.pureComputed(()=>y().reduce((e,t)=>e+t.clears,0)),S=ko.pureComputed(()=>y().reduce((e,t)=>e+t.clears*t.cost,0)),k=ko.pureComputed(()=>y().reduce((e,t)=>e+500*t.cost,0)),E=ko.pureComputed(()=>y().reduce((e,t)=>e+t.remaining,0)),_=ko.pureComputed(()=>y().sort((e,t)=>t.clears-e.clears).slice(0,5)),A=ko.pureComputed(()=>{const e=[];return GameConstants.RegionGyms.forEach((t,n)=>{n>GameConstants.MAX_AVAILABLE_REGION||(n==GameConstants.Region.alola&&(t=t.filter(e=>!e.endsWith(" Trial"))),e.push({region:n,gyms:t}))}),Companion.data.GymListOverride.forEach(t=>e.push({...t})),e.forEach(e=>{e.gyms=e.gyms.map(e=>({name:e,clears:C(e)}))}),e.sort((e,t)=>e.region-t.region)}),C=e=>{if(!SaveData.isLoaded())return 0;const t=GameConstants.getGymIndex(e);return SaveData.file().save.statistics.gymsDefeated[t]||0},R=ko.pureComputed(()=>{const e=[],t=Companion.data.RouteListOverride;GameHelper.enumNumbers(GameConstants.Region).forEach(n=>{if(n>GameConstants.MAX_AVAILABLE_REGION||n<0)return;const r=Routes.regionRoutes.filter(e=>e.region==n),o=1==SubRegions.list[n].length?r:r.filter(e=>!t.some(t=>t.region===e.region&&t.subRegion===e.subRegion));e.push({region:n,subRegion:0,routes:o})}),t.forEach(t=>e.push({...t}));return e.forEach(e=>{const t=GameConstants.camelCaseToString(GameConstants.Region[e.region]);e.routes.forEach(e=>{e.pokemonList=B(e),e.displayName=e.routeName.replace(t,"").trim(),e.defeats=L(e.region,e.number),e.pokemonCount=e.pokemonList.length,e.shinyCount=I(e.pokemonList),e.resistCount=x(e.pokemonList),e.isComplete=(e=>!(e.defeats<1e4||e.shinyCount<e.pokemonCount||T()&&e.resistCount<e.pokemonCount))(e)})}),e.sort((e,t)=>(e.displayRegion||e.region)-(t.displayRegion||t.region)||(e.displaySubRegion||e.subRegion)-(t.displaySubRegion||t.subRegion))}),T=ko.pureComputed(()=>!!SaveData.isLoaded()&&!0===SaveData.file().save.keyItems.Pokerus_virus),L=(e,t)=>{if(!SaveData.isLoaded())return 0;const n=GameConstants.Region[e];return SaveData.file().save.statistics.routeKills[n][t]||0},B=e=>{const t=new Set([...e.pokemon.land,...e.pokemon.water,...e.pokemon.headbutt]);for(const n of e.pokemon.special)n.req instanceof SpecialEventRequirement||n.req?.requirements?.some(e=>e instanceof SpecialEventRequirement)||n.pokemon.forEach(e=>t.add(e));return[...t]},I=e=>e.reduce((e,t)=>(Companion.partyList()[pokemonMap[t].id]?.shiny&&(e+=1),e),0),x=e=>e.reduce((e,t)=>(Companion.partyList()[pokemonMap[t].id]?.pokerus===GameConstants.Pokerus.Resistant&&(e+=1),e),0),D=ko.pureComputed(()=>{if(!SaveData.isLoaded())return[];const e=dungeonList["Max Lair"].bossList.filter(e=>e.options?.requirement?.requirements?.some(e=>e instanceof QuestLineStepCompletedRequirement&&"function"==typeof e.questIndex)),t=App.game.quests.getQuestLine("The Lair of Giants").quests(),n=e.map(e=>{const n=e.options.requirement.requirements.find(e=>e instanceof QuestLineStepCompletedRequirement).questIndex();return{pokemon:e.name,questStep:n,wishingPieces:t[n].amount}}).sort((e,t)=>e.questStep-t.questStep);n.splice(0,0,{pokemon:"Gigantamax Pikachu"},{pokemon:"Gigantamax Meowth"},{pokemon:"Gigantamax Eevee"});let r="Eternamax Eternatus";const o=SaveData.getMonoType(SaveData.file().save.party.caughtPokemon);return 1==o?.length&&o[0]==PokemonType.Poison&&(r="Eternapants Eternapantatus"),n.push({pokemon:r}),n}),P=ko.observable(),M=ko.observable(!0),O=ko.observable(!0),N=ko.observable(!0),G=ko.observable(WeatherType.Clear),j=ko.observable(GameConstants.Region.none),U=ko.observable({}),W=ko.observable("#mySaveContent");$(document).ready(()=>{const e=document.getElementById("container");if(ko.applyBindings({},e),e.classList.remove("d-none"),$(".btn-save-selector").click(()=>{document.getElementById("file-selector").click()}),$("#loadFromClipboard").click(()=>{const e=$("#saveDataInput").val().trim();e.length&&(SaveData.loadSaveData(atob(e)),$("#loadFromClipboardModal").modal("hide"),$("#saveDataInput").val(""))}),$("#loadFromClipboardModal").on("shown.bs.modal",()=>{document.getElementById("saveDataInput").focus()}),$(document).on("shown.bs.tab",'button[data-bs-toggle="pill"]',e=>{U({...U(),[$(e.target).data("bs-target")]:!0})}),$("#mainNavbar button.nav-link").on("show.bs.tab",e=>{W($(e.target).data("bs-target"))}),$(document).on("click","#partyPokemonTable thead th.sortable",e=>{const t=e.currentTarget.dataset.sort;a()==t?s(!s()):(a(t),s(!0))}),window.location.hash.includes("#!")){window.location.hash.replace(/.*#!/,"").split("/").forEach(e=>{const t=$(`button[data-bs-toggle="pill"][data-path="${decodeURIComponent(e)}"]`);t.length&&t.tab("show")})}$(document).on("shown.bs.tab",'button[data-bs-toggle="pill"]',()=>{H()}),$(document).on("dragover",e=>{e.preventDefault()}),document.addEventListener("dragenter",e=>{}),document.addEventListener("dragleave",e=>{}),document.addEventListener("drop",e=>{e.preventDefault();let t=[];t=e.dataTransfer.items?[...e.dataTransfer.items].filter(e=>"file"===e.kind).map(e=>e.getAsFile()):[...e.dataTransfer.files];const n=t.find(e=>e.name?.toLowerCase().endsWith(".txt"));n&&SaveData.loadFile(n)}),document.addEventListener("paste",async e=>{const t=e.target;if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t.isContentEditable)return;const n=e.clipboardData.items;if(!n?.length)return;const r=await F(n[0]);r&&(SaveData.loadSaveData(atob(r)),await navigator.clipboard.writeText(""))}),Companion.settings.initialize(),SaveData.initialize(),Util.createNotifications(),H()});const F=async e=>{if("string"===e.kind)return new Promise(t=>{e.getAsString(e=>t(e))});if("file"===e.kind){const t=e.getAsFile();if(t&&"text/plain"===t.type)return await t.text()}return null},H=()=>{const e=[];$('button[data-bs-toggle="pill"].active:visible').each(function(){const t=$(this).data("path");t&&e.push(t)}),e.length?window.history.replaceState(null,"",`#!${e.join("/").replace(/\s+/g,"")}`):window.history.replaceState(null,"",location.pathname)};function V(e,t){switch(e){case"name":return t.name;case"attack":return t.totalAttack;case"base-breeding-eff":return t.baseBreedingEff;case"breeding-eff":return t.breedingEff;case"obtained":return t.statistics.totalObtained;case"hatched":return t.statistics.totalHatched;case"shiny-obtained":return t.statistics.totalShinyObtained;case"shiny-hatched":return t.statistics.totalShinyHatched;case"defeated":return t.statistics.totalDefeated;case"evs":return t.evs();case"ev-bonus":return t.calculateEVAttackBonus();default:return t.id}}$(document).on("mouseover",".table-column-row-hover tbody td",e=>{const t=e.target;$(t).closest("tr").find("td").css("background-color","rgba(100, 100, 60, 0.1)"),$(t).closest("tbody").find(`td:nth-child(${t.cellIndex+1})`).css("background-color","rgba(100, 100, 60, 0.1)"),t.style.backgroundColor="rgba(100, 100, 60, 0.25)"}),$(document).on("mouseout",".table-column-row-hover tbody td",e=>{const t=e.target;$(t).closest("tr").find("td").css("background-color",""),$(t).closest("tbody").find(`td:nth-child(${t.cellIndex+1})`).css("background-color","")});const q=ko.observable(void 0);t.exports={getMissingPokemon:u,getTotalMissingPokemonCount:d,getMissingRegionPokemonCount:c,partyList:r,getSortedPartyList:l,caughtPokemonCount:f,caughtShinyCount:p,caughtResistantCount:h,hideFromPokemonStatsTable:m,getPokemonStatsTableCount:g,pokemonStatTableSearch:o,pokemonStatTableFilter:i,isEventDiscordClientPokemon:e=>Companion.data.EventDiscordClientPokemon.includes(e),isPokemonCaught:e=>null!=r()[PokemonHelper.getPokemonByName(e).id],getCaughtPokeballImage:e=>{const t=r()[PokemonHelper.getPokemonByName(e).id];return t?`assets/images/pokeball/Pokeball${t.shiny?"-shiny":""}.svg`:""},hasPokerus:e=>{const t=r()[PokemonHelper.getPokemonByName(e).id];return(t?.pokerus??0)>0},getPokerusImage:e=>{const t=r()[PokemonHelper.getPokemonByName(e).id];return t&&t.pokerus!=GameConstants.Pokerus.Uninfected?`assets/images/breeding/pokerus/${GameConstants.Pokerus[t.pokerus]}.png`:"//:0"},getShadowStatusImage:e=>e==GameConstants.ShadowStatus.None?"//:0":`assets/images/status/${e==GameConstants.ShadowStatus.Shadow?"shadow":"purified"}.svg`,exportPartyPokemon:()=>{const e=l().map(e=>[e.id,`"${e.name}"`,PokemonType[pokemonMap[e.id].type[0]],PokemonType[pokemonMap[e.id].type[1]??-1],e.shiny?1:0,e.pokerus,Companion.data.shadowPokemon.has(e.name)?e.shadow:-1,GameConstants.camelCaseToString(GameConstants.Region[PokemonHelper.calcNativeRegion(e.name)]),e.totalAttack,e.baseBreedingEff,e.breedingEff,e.statistics.totalObtained,e.statistics.totalHatched,e.statistics.totalShinyObtained,e.statistics.totalShinyHatched,e.statistics.totalDefeated,e.effortPoints,e.evs(),e.calculateEVAttackBonus()]);Util.exportToCsv(["#","Pokemon","Type 1","Type 2","Shiny","Pokerus","Shadow Status","Native Region","Attack","Base Breeding Eff","Breeding Eff","Obtained","Hatched","Shiny Obtained","Shiny Hatched","Defeated","Effort Points","EVs","EV Bonus"],e,`PartyPokemon-${Date.now()}.csv`)},isPokerusUnlocked:T,getDungeonData:b,totalDungeonClears:v,totalDungeonTokensSpent:S,totalDungeonCost500Clears:k,remainingDungeonCost500Clears:E,getMostClearedDungeons:_,getGymData:A,getRouteData:R,hideOtherStatSection:e=>{if(e.hidden)return!0;const t=e.displayRegion??e.region;return t>GameConstants.MAX_AVAILABLE_REGION||!Companion.settings.showAllRegions()&&Math.floor(t)>player.highestRegion()},getGMaxOrder:D,typeDamageDistribution:P,calculateTypeDamageDistribution:()=>{SaveData.loadAttackData(),player.effectList.xAttack(M()?1:0),App.game.challenges.list.disableGems.active(!N()),O()!=FluteEffectRunner.isActive("Yellow_Flute")()&&FluteEffectRunner.toggleEffect("Yellow_Flute");const e=j()==GameConstants.Region.none,t={};let n=0,r=Number.MAX_SAFE_INTEGER;for(let o=0;o<=17;++o){t[PokemonType[o]]={};for(let i=0;i<=17;++i){let a=App.game.party.calculatePokemonAttack(o,i,e,j(),!0,!1,G(),!0,!0);t[PokemonType[o]][PokemonType[i]]=a.toLocaleString(),n=Math.max(n,a),r=Math.min(r,a)}}P({distribution:t,max:n,min:r})},includeXAttack:M,includeYellowFlute:O,includeGems:N,typeDamageWeather:G,typeDamageRegion:j,tabVisited:U,activeTab:W,selectedRoute:q}},{}],37:[function(e,t,n){const r={xAttackEnabled:ko.observable(!1),weather:ko.observable(WeatherType.Clear),hideCompleted:ko.observable(!0),hideLocked:ko.observable(!1),activeFlutes:ko.observableArray([]),allFlutesToggle:ko.observable(!1),clicksPerSecond:ko.observable(0),xClickEnabled:ko.observable(!1),rockyHelmetEnabled:ko.observable(!1)};r.xAttackEnabled.subscribe(e=>{player.effectList.xAttack(e?1:0)}),r.xClickEnabled.subscribe(e=>{player.effectList.xClick(e?1:0)}),r.activeFlutes.subscribe(()=>{h()}),r.allFlutesToggle.subscribe(e=>{e?r.activeFlutes(Object.values(GameConstants.FluteItemType)):r.activeFlutes([])}),r.clicksPerSecond.subscribe(e=>{(isNaN(e)||e<0||!e?.length)&&r.clicksPerSecond(0),e>20&&r.clicksPerSecond(20)}),r.rockyHelmetEnabled.subscribe(e=>{App.game.oakItems.itemList[OakItemType.Rocky_Helmet].isActiveKO(!!e)});const o=["hideCompleted","hideLocked","allFlutesToggle"];Object.entries(r).forEach(([e,t])=>{o.includes(e)||t.subscribe(()=>BattleCalculator.calcBattleData())});let i=-1;const a=(e=0,t=0)=>{const n=r.clicksPerSecond();if(n<=0)return 0;const o=App.game.party.partyPokemonActiveInSubRegion(e,t),i=Math.pow(o.reduce((e,t)=>e+t.clickAttackBonus(),1),1.4),a=App.game.multiplier.getBonus("clickAttack",!1);return Math.floor(i*a)*Math.floor(n)},s=ko.pureComputed(()=>r.activeFlutes().includes("Time_Flute")),l=ko.pureComputed(()=>{if(!SaveData.isDamageLoaded()||!s())return GameConstants.GYM_TIME/1e3;const e=(ItemList.Time_Flute.multiplyBy-1)*(AchievementHandler.achievementBonus()+1)+1,t=GameConstants.GYM_TIME*e;return Math.ceil(t/100)/10}),u=ko.pureComputed(()=>{if(!SaveData.isDamageLoaded()||!s())return GameConstants.TEMP_BATTLE_TIME/1e3;const e=(ItemList.Time_Flute.multiplyBy-1)*(AchievementHandler.achievementBonus()+1)+1,t=GameConstants.TEMP_BATTLE_TIME*e;return Math.ceil(t/100)/10}),c=new Map,d=(e,t,n)=>{const o=pokemonMap[e],i=o.type[0],a=o.type[1]??PokemonType.None;let s=`${t}|${i}|${a}`,l=`${t}|${a}|${i}`;t==GameConstants.Region.alola&&n==GameConstants.AlolaSubRegions.MagikarpJump&&(s=`${s}|mkj`,l=`${l}|mkj`);let u=c.get(s)||c.get(l);return void 0===u&&(u=f(i,a,t,r.weather(),t,n),c.set(s,u)),u},f=(e,t,n,r,o=0,i=0)=>{let a=0;for(const s of App.game.party.caughtPokemon){let l=!1;if(n==GameConstants.Region.alola&&o==GameConstants.Region.alola&&i==GameConstants.AlolaSubRegions.MagikarpJump){if(129!=Math.floor(s.id))continue;l=!0}a+=App.game.party.calculateOnePokemonAttack(s,e,t,n,l,!0,!1,r,!1,!0)}const s=App.game.party.multiplier.getBonus("pokemonAttack");return Math.round(a*s)},p=Party.prototype.getRegionAttackMultiplier;Party.prototype.getRegionAttackMultiplier=()=>{const e=Math.max(i,player.highestRegion());return p(e)};const h=()=>{Object.values(GameConstants.FluteItemType).forEach(e=>{m(e,r.activeFlutes().includes(e))})},m=(e,t)=>{t&&!g(e)&&(player.itemList[e](0),player.effectList[e](1),b()),!t&&g(e)&&(player.effectList[e](0),player.itemList[e](1),b())},g=e=>!!player.effectList[e](),b=()=>{FluteEffectRunner.activeGemTypes.removeAll();const e=new Set;GameHelper.enumStrings(GameConstants.FluteItemType).forEach(t=>{g(t)&&ItemList[t].gemTypes.forEach(t=>e.add(PokemonType[t]))}),[...e].forEach(e=>FluteEffectRunner.activeGemTypes.push(e))},y=ko.observable(!1),w=ko.observable([]),v=ko.observable([]),S=()=>{let e=[];GameConstants.RegionGyms.forEach((t,n)=>{n>GameConstants.MAX_AVAILABLE_REGION||(n==GameConstants.Region.alola&&(t=t.filter(e=>!e.endsWith(" Trial"))),e.push({region:n,gyms:t}))});const t=SaveData.file().save.statistics.gymsDefeated;Companion.data.GymListOverride.forEach(t=>e.push({...t})),e=e.sort((e,t)=>e.region-t.region).flatMap(e=>e.gyms.map(n=>{const o=GymList[n];return o.region=e.region,o.townObj=TownList[o.parent?.name??o.town],o.pokemonList=o.getPokemonList().map(e=>({...e,partyDamage:ko.observable(0),secondsToDefeat:ko.observable(0)})),o.isCompleted=t[GameConstants.getGymIndex(o.town)]>0,o.isVisible=ko.pureComputed(()=>!(!Companion.settings.showAllRegions()&&Math.floor(o.region)>player.highestRegion())&&(!(r.hideLocked()&&!o.isUnlocked())&&(!r.hideCompleted()||!o.isCompleted))),o.secondsToWin=ko.observable(0),o.clickDamage=ko.observable(0),o})),w(e)},k=()=>{const e=[],t=SaveData.file().save.statistics.temporaryBattleDefeated;Object.values(TemporaryBattleList).forEach(n=>{n.getTown().region>GameConstants.MAX_AVAILABLE_REGION||(n.pokemonList=n.getPokemonList().map(e=>({...e,partyDamage:ko.observable(0),secondsToDefeat:ko.observable(0)})),n.isCompleted=t[GameConstants.getTemporaryBattlesIndex(n.name)]>0,n.isVisible=ko.pureComputed(()=>!(!Companion.settings.showAllRegions()&&n.getTown().region>player.highestRegion())&&(!(r.hideLocked()&&!n.isUnlocked())&&(!r.hideCompleted()||!n.isCompleted))),n.secondsToWin=ko.observable(0),n.clickDamage=ko.observable(0),e.push(n))}),v(e)},E=()=>{const e=performance.now();c.clear();const t=a(),n=a(GameConstants.Region.alola,GameConstants.AlolaSubRegions.MagikarpJump);for(const e of w()){i=e.townObj.region,e.secondsToWin(0),e.clickDamage(e.townObj.region===GameConstants.Region.alola&&e.townObj.subRegion===GameConstants.AlolaSubRegions.MagikarpJump?n:t);for(const t of e.pokemonList){const n=d(t.name,e.townObj.region,e.townObj.subRegion??0)+e.clickDamage();t.partyDamage(n);const r=Math.max(1,Math.ceil(t.maxHealth/n));t.secondsToDefeat(r),n>0&&e.secondsToWin(e.secondsToWin()+r)}0===e.secondsToWin()&&e.secondsToWin(1/0)}for(const e of v()){const r=e.getTown();i=r.region,e.secondsToWin(0),e.clickDamage(r.region===GameConstants.Region.alola&&r.subRegion===GameConstants.AlolaSubRegions.MagikarpJump?n:t);for(const t of e.pokemonList){const n=d(t.name,r.region,r.subRegion??0)+e.clickDamage();t.partyDamage(n);const o=Math.max(1,Math.ceil(t.maxHealth/n));t.secondsToDefeat(o),n>0&&e.secondsToWin(e.secondsToWin()+o)}0===e.secondsToWin()&&e.secondsToWin(1/0)}i=-1;const r=performance.now();console.log(`[calcBattleData] ${r-e}ms`)};t.exports={settings:r,getGymBattleTime:l,getTempBattleTime:u,formattedSecondsToWin:e=>e.toLocaleString(),calcClickAttack:a,showData:y,gymList:w,tempBattleList:v,calculate:()=>{const e=performance.now();SaveData.isDamageLoaded()||SaveData.loadAttackData(),S(),k(),E(),y(!0);const t=performance.now();console.log(`[calculate] ${t-e}ms`)},calcBattleData:E}},{}],38:[function(e,t,n){const r=["Mega Altaria","Arceus (Fire)","Arceus (Water)","Arceus (Electric)","Arceus (Grass)","Arceus (Ice)","Arceus (Fighting)","Arceus (Poison)","Arceus (Ground)","Arceus (Flying)","Arceus (Psychic)","Arceus (Bug)","Arceus (Rock)","Arceus (Ghost)","Arceus (Dragon)","Arceus (Dark)","Arceus (Steel)","Arceus (Fairy)","Dugtrio (Punk)","Weepinbell (Fancy)","Gengar (Punk)","Onix (Rocker)","Tangela (Pom-pom)","Goldeen (Diva)","Pikachu (Rock Star)","Pikachu (Belle)","Pikachu (Pop Star)","Pikachu (Ph. D.)","Pikachu (Libre)","Furfrou (Heart)"],o={...Object.fromEntries(pokemonList.filter(e=>129==Math.floor(e.id)&&e.id>129).map(e=>[e.name,GameConstants.Region.alola])),"Magikarp (Feebas)":GameConstants.Region.hoenn,...Object.fromEntries(pokemonList.filter(e=>25==Math.floor(e.id)&&e.id>25).map(e=>[e.name,GameConstants.Region.alola])),"Pikachu (Palaeontologist)":GameConstants.Region.kanto,"Detective Pikachu":GameConstants.Region.kalos,"Detective Raichu":GameConstants.Region.kalos,"Pikachu (World Cap)":GameConstants.Region.galar,...Object.fromEntries(pokemonList.filter(e=>e.name.startsWith("Pinkan ")||e.name.startsWith("Valencian ")).map(e=>[e.name,GameConstants.Region.hoenn])),"Pink Butterfree":GameConstants.Region.hoenn,"Ash's Butterfree":GameConstants.Region.hoenn,"Pinkan Pikachu":GameConstants.Region.hoenn,"Crystal Onix":GameConstants.Region.hoenn,"Crystal Steelix":GameConstants.Region.hoenn,...Object.fromEntries(pokemonList.filter(e=>e.name.startsWith("Mega ")||e.name.startsWith("Primal ")).map(e=>[e.name,GameConstants.Region.kalos])),...Object.fromEntries(pokemonList.filter(e=>e.name.startsWith("Gigantamax ")||e.name.startsWith("Eternamax")).map(e=>[e.name,GameConstants.Region.galar])),"Meowth (Phanpy)":GameConstants.Region.johto,"Unown (E)":GameConstants.Region.sinnoh,"Unown (!)":GameConstants.Region.hoenn,"Unown (?)":GameConstants.Region.hoenn,XD001:GameConstants.Region.unova,"Hoppip (Chimecho)":GameConstants.Region.hoenn,Meltan:GameConstants.Region.alola,Melmetal:GameConstants.Region.alola,"Ditto (Magikarp)":GameConstants.Region.alola,"Flowering Celebi":GameConstants.Region.galar,"Magearna (Original Color)":GameConstants.Region.galar,"Squad Leader Squirtle":GameConstants.Region.johto,"Deoxys (Green Core)":GameConstants.Region.unova,"Deoxys (Clone)":GameConstants.Region.unova,"Bulbasaur (Rose)":GameConstants.Region.sinnoh,"Ivysaur (Rose)":GameConstants.Region.sinnoh,"Venusaur (Rose)":GameConstants.Region.sinnoh,"Pikachu (Gengar)":GameConstants.Region.hoenn,"Flying Pikachu":GameConstants.Region.kanto,"Surfing Pikachu":GameConstants.Region.kanto,"Let's Go Pikachu":GameConstants.Region.kanto,"Pikachu (Clone)":GameConstants.Region.kanto,"Pikachu (Easter)":GameConstants.Region.hoenn,"Togepi (Flowering Crown)":GameConstants.Region.hoenn},i=[{region:.1,name:"Sevii Islands 123",dungeons:[...Object.values(TownList).filter(e=>e.region==GameConstants.Region.kanto&&e.subRegion==GameConstants.KantoSubRegions.Sevii123&&e instanceof DungeonTown).map(e=>e.name)]},{region:2.1,name:"Sevii Islands 4567",dungeons:[...Object.values(TownList).filter(e=>e.region==GameConstants.Region.kanto&&e.subRegion==GameConstants.KantoSubRegions.Sevii4567&&e instanceof DungeonTown).map(e=>e.name)]},{region:2.2,name:"Orre",dungeons:[...Object.values(TownList).filter(e=>e.region==GameConstants.Region.hoenn&&e.subRegion==GameConstants.HoennSubRegions.Orre&&e instanceof DungeonTown).map(e=>e.name)]}],a=[{region:2.1,name:"Orange League",gyms:[...GameConstants.OrangeGyms]},{region:2.2,name:"Orre",gyms:[...GameConstants.OrreGyms.filter(e=>!GymList[e].requirements.some(e=>e instanceof DevelopmentRequirement))]},{region:6.1,name:"Magikarp Jump",gyms:[...GameConstants.MagikarpJumpGyms]}],s=[{region:0,subRegion:1,name:"Sevii Islands 123",routes:Routes.regionRoutes.filter(e=>e.region==GameConstants.Region.kanto&&e.subRegion==GameConstants.KantoSubRegions.Sevii123)},{region:0,displayRegion:2,subRegion:2,name:"Sevii Islands 4567",routes:Routes.regionRoutes.filter(e=>e.region==GameConstants.Region.kanto&&e.subRegion==GameConstants.KantoSubRegions.Sevii4567)},{region:2,subRegion:1,displaySubRegion:2,name:"Orre",routes:Routes.regionRoutes.filter(e=>e.region==GameConstants.Region.hoenn&&e.subRegion==GameConstants.HoennSubRegions.Orre)},{region:6,subRegion:4,name:"Magikarp Jump",routes:Routes.regionRoutes.filter(e=>e.region==GameConstants.Region.alola&&e.subRegion==GameConstants.AlolaSubRegions.MagikarpJump)}],l=(()=>{const e=r.filter(e=>"string"==typeof e),t=r.filter(e=>"object"==typeof e).map(e=>new RegExp(e));return pokemonList.filter(n=>!(n.id<1)&&(!(PokemonHelper.calcNativeRegion(n.name)>GameConstants.MAX_AVAILABLE_REGION)&&(!e.includes(n.name)&&!t.some(e=>e.test(n.name))))).map(e=>(e.nativeRegion=PokemonHelper.calcNativeRegion(e.name),e.obtainRegion=o[e.name]||e.nativeRegion,e))})(),u=l.reduce((e,t)=>(e[t.id]=t,e),{}),c=(()=>{const e=Object.values(TownList).filter(e=>e.region==GameConstants.Region.hoenn&&e.subRegion==GameConstants.HoennSubRegions.Orre&&e instanceof DungeonTown&&!e.requirements.some(e=>e instanceof DevelopmentRequirement)).map(e=>e.dungeon),t=[];return e.forEach(e=>{e.enemyList.forEach(e=>{e instanceof DungeonTrainer&&t.push(...e.getTeam().filter(e=>e.shadow==GameConstants.ShadowStatus.Shadow).map(e=>e.name))}),e.bossList.forEach(e=>{e instanceof DungeonTrainer&&t.push(...e.getTeam().filter(e=>e.shadow==GameConstants.ShadowStatus.Shadow).map(e=>e.name))})}),new Set(t)})(),d=GameHelper.enumNumbers(GameConstants.Region).filter(e=>e>GameConstants.Region.none&&e<=GameConstants.MAX_AVAILABLE_REGION),f=d.map(e=>GameConstants.camelCaseToString(GameConstants.Region[e])),p=RoamingPokemonList.roamerGroups.map((e,t)=>e.map((e,n)=>({name:e.name,region:t,subRegionGroup:n}))).flat().filter(e=>e.region<=GameConstants.MAX_AVAILABLE_REGION),h="ABCDEFGHIJKLMNOPQRSTUVWXYZ!?".split(""),m=[GameConstants.BerryTraderLocations["Pinkan Pokmon Reserve"],GameConstants.BerryTraderLocations["Secret Berry Shop"]],g={[GameConstants.BerryTraderLocations["Pinkan Pokmon Reserve"]]:[{pokemon:"Pinkan Arbok",minCost:40,maxCost:60},{pokemon:"Pinkan Oddish",minCost:20,maxCost:40},{pokemon:"Pinkan Poliwhirl",minCost:40,maxCost:60},{pokemon:"Pinkan Geodude",minCost:20,maxCost:40},{pokemon:"Pinkan Weezing",minCost:80,maxCost:100},{pokemon:"Pinkan Scyther",minCost:80,maxCost:100},{pokemon:"Pinkan Electabuzz",minCost:80,maxCost:100}],[GameConstants.BerryTraderLocations["Secret Berry Shop"]]:[{pokemon:"Grotle (Acorn)",minCost:80,maxCost:100}]};t.exports={UnobtainablePokemon:r,EventDiscordClientPokemon:["Bulbasaur (Clone)","Spooky Bulbasaur","Bulbasaur (Rose)","Ivysaur (Clone)","Spooky Ivysaur","Ivysaur (Rose)","Venusaur (Clone)","Spooky Venusaur","Venusaur (Rose)","Charmander (Clone)","Charmeleon (Clone)","Charizard (Clone)","Squirtle (Clone)","Wartortle (Clone)","Blastoise (Clone)","Pikachu (Clone)","Pikachu (Easter)","Red Spearow","Flying Pikachu","Surfing Pikachu","Pikachu (Gengar)","Let's Go Pikachu","Charity Chansey","Santa Jynx","Let's Go Eevee","Santa Snorlax","Snorlax (Snowman)","Armored Mewtwo","Spooky Togepi","Togepi (Flowering Crown)","Spooky Togetic","Reindeer Stantler","Blessing Blissey","Grinch Celebi","Torchic (Egg)","Handout Happiny","Elf Munchlax","Spooky Togekiss","Rotom (Discord)","Vivillon (Fancy)"],pokemonRegionOverride:o,DungeonListOverride:i,GymListOverride:a,RouteListOverride:s,obtainablePokemonList:l,obtainablePokemonMap:u,shadowPokemon:c,validRegions:d,validRegionNames:f,roamerGroups:p,unownDungeonList:["Ruins of Alph","Tanoby Ruins","Solaceon Ruins"],unownList:h,berryMasterPokemonLocations:m,berryMasterPokemonCosts:g}},{}],39:[function(e,t,n){const r=ko.observable(0),o=ko.pureComputed(()=>r()>4),i=["Reveal Required Berries (may result in being judged)","Are you SURE!?","No, really, are you ABSOLUTELY SURE??","Just get the hints normally, man.","Fine. Have it your way >:("],a=ko.pureComputed(()=>i[r()]||"..."),s=ko.pureComputed(()=>{const e=["North","West","East","South"].map(e=>({direction:e,berry:void 0}));if(!SaveData.isLoaded())return e;const t=App.game.farming.mutations.findIndex(e=>e.mutatedBerry==BerryType.Enigma),n=SaveData.file().save.farming.mutations[t].seen;for(let t=0;t<e.length;t++)(n[t]||o())&&(e[t].berry=BerryType[EnigmaMutation.getReqs()[t]]);return e});t.exports={revealHintsCounter:r,revealHints:o,buttonText:a,revealHintsButtonClick:()=>r(r()+1),getBerries:s}},{}],40:[function(e,t,n){const r=ko.observableArray(),o=ko.observableArray(),i=ko.observableArray(),a=ko.observableArray(),s=GameHelper.enumStrings(GameConstants.BerryTraderLocations).filter(e=>"None"!=e),l=ko.observable(new Date),u=ko.observable({unown:[],weather:[],boostedRoutes:[],berryTrades:[],islandScan:{}}),c=e=>{const t=[],n=[],s=[],l=[],u=new Date;u.setHours(0,0,0,0);for(const[r,o]of Object.entries(e)){const[e,i,a]=r.split("-").map(Number),c=new Date(e,i-1,a);if(!(c<u)){t.push({startDate:c,unowns:o.unown}),l.push({date:c,traderDeals:o.berryDeal});for(const e of o.weather){const t=new Date(c);t.setHours(e.hour),n.push({startDate:t,regionalWeather:e.weather})}for(const e of o.boostedRoute){const t=new Date(c);t.setHours(e.hour),s.push({startDate:t,regionalRoutes:e.routes.flatMap(e=>e)})}}}const c=(new Date).getHours();n.splice(0,Math.floor(c/Weather.period)),s.splice(0,Math.floor(c/RoamingPokemonList.period)),r(t),o(n),i(s.slice(0,6)),a(l)},d=(e=new Date)=>{l(new Date(e)),u({unown:f(e),weather:m(e),boostedRoutes:g(e),berryTrades:h(e),islandScan:S(e)})},f=(e=new Date)=>(SeededDateRand.seedWithDate(e),[p(e,AlphUnownList),p(e,TanobyUnownList),p(e,SolaceonUnownList)]),p=(e,t)=>{SeededRand.seedWithDate(e);return SeededRand.shuffleArray([...Array(t.length).keys()]).slice(0,3).map(e=>t[e])},h=(e=new Date)=>(BerryDeal.generateDeals(e),Object.values(BerryDeal.list).map(e=>[...e()])),m=(e=new Date)=>{const t=[];for(let n=0;n<=23;n+=Weather.period){const r=new Date(e.setHours(n,0,0,0)),o={startDate:r,regionalWeather:{}};for(let e=GameConstants.Region.kanto;e<=GameConstants.MAX_AVAILABLE_REGION;e++)o.regionalWeather[e]=Weather.getWeather(e,r);t.push(o)}return t},g=(e=new Date)=>{const t=[];for(let n=0;n<=23;n+=RoamingPokemonList.period){const r=new Date(e.setHours(n,0,0,0));RoamingPokemonList.generateIncreasedChanceRoutes(r);const o={startDate:r,regionalRoutes:[]};Companion.data.roamerGroups.forEach(e=>{const t=RoamingPokemonList.getIncreasedChanceRouteBySubRegionGroup(e.region,e.subRegionGroup)();o.regionalRoutes.push(t.routeName.replace("Route ",""))}),t.push(o)}return t},b=(e,t=void 0)=>(null!=t?a().slice(0,t):a()).map(t=>({date:t.date,deals:t.traderDeals[e]})),y=s.map(e=>ko.observable("")),w=s.map(e=>ko.observable("alpha")),v=(e,t,n)=>b(e).find(e=>e.deals.find(e=>e.item.itemName==t&&e.berries[0].amount==n))?.date,S=(e=new Date)=>{const t={route:[],dungeon:[]};for(const n of Routes.getRoutesByRegion(GameConstants.Region.alola)){const r=n.pokemon.special.filter(t=>t.req instanceof DayOfWeekRequirement&&t.req.DayOfWeekNum==e.getDay());r.length&&t.route.push({name:n.routeName,pokemon:r.flatMap(e=>e.pokemon)})}return GameConstants.RegionDungeons[GameConstants.Region.alola].forEach(n=>{const r=dungeonList[n],o=[],i=r.enemyList.filter(t=>{if("object"!=typeof t)return!1;const n=t.options.requirement instanceof DayOfWeekRequirement?t.options.requirement:t.options.requirement?.requirements?.find(e=>e instanceof DayOfWeekRequirement);return n?.DayOfWeekNum===e.getDay()});i.length&&o.push(...i.flatMap(e=>e.pokemon));const a=r.bossList.filter(t=>{const n=t.options?.requirement instanceof DayOfWeekRequirement?t.options?.requirement:t.options?.requirement?.requirements?.find(e=>e instanceof DayOfWeekRequirement);return n?.DayOfWeekNum===e.getDay()});a.length&&o.push(...a.flatMap(e=>e.name)),o.length&&t.dungeon.push({name:n,pokemon:o})}),t},k=ko.observable(!1);$(document).ready(()=>{fetch(`/assets/data/v${Companion.package.version}/forecastData.json`).then(e=>e.json()).then(e=>{c(e),d(),k(!0)})}),t.exports={unownForecast:r,weatherForecast:o,boostedRoutes:i,berryMasters:a,summary:u,summaryDate:l,generateForecasts:c,generateDailySummary:d,getUpcomingWeather:()=>{const e=o.slice(0,18).reduce((e,t)=>{const n=Util.formatDate(t.startDate);return e[n]=e[n]||[],e[n].push(t),e},{});return Object.entries(e).map(([e,t])=>({date:e,forecast:t}))},getNextWeatherDate:(e,t)=>o().find(n=>n.regionalWeather[e]===t)?.startDate,getBerryMasterDeals:b,getBerryMasterNextItemDate:e=>{const t={},n=(new Date).setHours(0,0,0,0);return b(e).forEach(e=>e.deals.forEach(r=>{const o=r.item.itemName;!t[o]&&e.date.setHours(0,0,0,0)>n&&(t[o]={date:e.date,item:r.item.itemName,amount:r.item.amount,berries:r.berries})})),Object.values(t).sort((e,t)=>e.item.localeCompare(t.item))},getBerryMasterPokemonMinMaxCost:e=>{const t=[...Companion.data.berryMasterPokemonCosts[e]];return t.forEach(t=>{t.minDate=v(e,t.pokemon,t.minCost),t.maxDate=v(e,t.pokemon,t.maxCost)}),t},getIslandScanPokemonByDate:S,getItemListByBerryMaster:e=>ko.pureComputed(()=>{const t={},n=b(e);for(const e of n)for(const n of e.deals){const r=ItemList[n.item.itemName].displayName;t[r]=t[r]||[],t[r].push({date:e.date,amount:n.item.amount,berries:n.berries})}const r=y[e]().trim().toLowerCase(),o=w[e](),i=Object.entries(t).reduce((e,[t,n])=>(r.length&&!t.toLowerCase().includes(r)||e.push({item:t,deals:n}),e),[]);return"next"===o?i.sort((e,t)=>e.deals[0].date-t.deals[0].date||e.item.localeCompare(t.item)):i.sort((e,t)=>e.item.localeCompare(t.item))}),calcBerryMasterDealAfford:e=>{if(!SaveData.isLoaded())return 0;const t=SaveData.file().save.farming.berryList,n=e.map(e=>Math.floor(t[e.berryType]/e.amount));return Math.min(...n)},berryMasterList:s,berryMasterSearchSetting:y,berryMasterDisplaySetting:w,dataLoaded:k}},{}],41:[function(e,t,n){const r=ko.pureComputed(()=>SaveData.isLoaded()?pokemonList.filter(e=>PokemonLocations.isObtainableAndNotEvable(e.name)&&PokemonHelper.calcNativeRegion(e.name)<=GameConstants.MAX_AVAILABLE_REGION).map(e=>e.name):[]),o=ko.pureComputed(()=>{if(!SaveData.isLoaded())return[];const e=GameConstants.FRIEND_SAFARI_POKEMON,t=SaveData.file().player.trainerId||"000000";SeededRand.seed(+t);const n=new Array(e).fill(SeededRand.shuffleArray(r())).flat(),o=Math.ceil(n.length/e),i=new Date;let a=Math.floor((i.getTime()-60*i.getTimezoneOffset()*1e3)/864e5)%o*e;const s=[];for(let t=0;t<Math.ceil(r().length/e);t++)s.push({date:new Date(i),pokemon:n.slice(a,a+e)}),a+=e,a>=n.length&&(a=0),i.setDate(i.getDate()+1);return s});t.exports={getRotation:o,isInRotation:e=>r().includes(e),pokemonCount:()=>r().length}},{}],42:[function(e,t,n){Notifier.notify=()=>{},SaveSelector.loadSaves=()=>{},SortModules=()=>{},EnigmaMutation.prototype.fromJSON=()=>{},QuestLineHelper.loadQuestLinesReal=QuestLineHelper.loadQuestLines,QuestLineHelper.loadQuestLines=()=>{App.game.quests.questLines().length>0||QuestLineHelper.loadQuestLinesReal()};const r=()=>{player=new Player,player.highestRegion(0);const e=new Multiplier;App.game=new Game(new Update,new Profile,new Breeding(e),new Pokeballs,new PokeballFilters,new Wallet(e),new KeyItems,new BadgeCase,new OakItems([20,50,100],e),new OakItemLoadouts,new PokemonCategories,new Party(e),new Gems,new Underground,new Farming(e),new LogBook,new RedeemableCodes,new Statistics,new Quests,new SpecialEvents,new Discord,new AchievementTracker,new Challenges,new BattleFrontier,e,new SaveReminder,new BattleCafeSaveObject,new DreamOrbController,new PurifyChamber,new WeatherApp,new ZMoves),App.game.farming.initialize(),App.game.breeding.initialize(),App.game.pokeballs.initialize(),App.game.keyItems.initialize(),App.game.oakItems.initialize(),App.game.underground.initialize(),App.game.farming.initialize(),QuestLineHelper.loadQuestLines(),App.game.badgeCase.maxLevel.extend({deferred:!0})};r(),GenericDeal.generateDeals(),AchievementHandler.initialize(App.game.multiplier,App.game.challenges),SafariPokemonList.generateSafariLists(),ko.bindingHandlers.tooltip={init:(e,t)=>{const n=ko.utils.unwrapObservable(t()),r={};ko.utils.extend(r,ko.bindingHandlers.tooltip.options),ko.utils.extend(r,n),$(e).tooltip(r),ko.utils.domNodeDisposal.addDisposeCallback(e,()=>{$(e).tooltip("dispose")})},update:function(e,t){const n=ko.utils.unwrapObservable(t()),r={};ko.utils.extend(r,ko.bindingHandlers.tooltip.options),ko.utils.extend(r,n);const o=bootstrap.Tooltip.getInstance(e);o._config.title=r.title;const i=o.tip&&o.tip.querySelector(".tooltip-inner");i&&(i.innerHTML=o._config.title||""),o&&o._config&&""===o._config.title&&$(e).tooltip("hide")}},t.exports={initGame:r}},{}],43:[function(e,t,n){const r=e("../pokeclicker/package.json");window.Companion={package:r,...e("./game"),...e("./app"),data:{...e("./data")},settings:e("./settings")},Object.assign(window,{SaveData:e("./save"),Forecast:e("./forecast"),VitaminTracker:e("./vitaminTracker"),Enigma:e("./enigma"),FriendSafari:e("./friendSafari"),SaveFixes:e("./saveFixes"),BattleCalculator:e("./battleCalculator"),Util:e("./util")})},{"../pokeclicker/package.json":35,"./app":36,"./battleCalculator":37,"./data":38,"./enigma":39,"./forecast":40,"./friendSafari":41,"./game":42,"./save":44,"./saveFixes":45,"./settings":46,"./util":47,"./vitaminTracker":48}],44:[function(e,t,n){const r=ko.observable(),o=ko.observableArray(),i=ko.observable(!1),a=(e,t=null)=>{const n=JSON.parse(e);if(!n.player||!n.save)return;if(void 0!==r()&&Companion.initGame(),player.highestRegion(n.player.highestRegion),player.trainerId=n.player.trainerId,App.game.challenges.list.slowEVs.active(n.save.challenges.list.slowEVs),Settings.setSettingByName("breedingEfficiencyAllModifiers",!1),Enigma.revealHintsCounter(0),VitaminTracker.highestRegion(player.highestRegion()),Companion.typeDamageDistribution(void 0),BattleCalculator.showData(!1),i(!1),r(n),t){const n=o().findIndex(e=>e.name==t);if(n>0)o.unshift(o.splice(n,1)[0]);else if(-1==n){const n=Util.compressString(e),r=o();r.unshift({name:t,data:n}),r.length=Math.min(r.length,5),o(r)}}n.save.party.caughtPokemon?.length||Util.notify({message:"Why don't you come back after catching some pokmon? Not a very good trainer, this one.",type:"danger",timeout:3e4});const a=s(n.save.party.caughtPokemon);if(a&&Util.notify({message:`Haha, look, they only have ${a.map(e=>PokemonType[e]).join("/")} pokmon!`,type:"danger",timeout:3e4}),"bailey"==n.save.profile.name.toLowerCase()){let e;if(1==Rand.intBetween(1,20))e="Hello. Bailey. We. See. You. We. Are. Watching.";else{const t=(new Date).getHours();e=t<5?"Bailey! What are you still doing up!? GO TO BED!":t<12?"Good morning, Bailey! Did you sleep well?":t<18?"Good afternoon, Bailey! We missed you. Enjoy your stay.":t<22?"Good evening, Bailey. How was your day?":"Hello, Bailey. It's getting kind of late, perhaps consider retiring to bed soon?"}e&&Util.notify({message:e,type:"danger",timeout:3e4})}else"potato"==n.save.profile.name.toLowerCase()&&Util.notify({message:"Potato? More like Pooptato.<br />",type:"danger",timeout:3e4})},s=e=>{if(!e?.length)return;let t=pokemonMap[e[0].id].type;for(let n=1;n<e.length;n++){const r=pokemonMap[e[n].id].type;if(t=t.filter(e=>r.includes(e)),!t.length)return}return t},l=ko.pureComputed(()=>void 0!==r()),u=ko.pureComputed(()=>{const e=r()?.save.update.version;return e&&e!=Companion.package.version}),c=AchievementHandler.achievementBonus;t.exports={file:r,prevLoadedSaves:o,loadFile:e=>{const t=e.name,n=new FileReader;n.addEventListener("load",()=>{a(atob(n.result),t)}),n.readAsText(e)},loadSaveData:a,loadPreviousFile:e=>{const t=o()[e];if(t){const e=Util.decompressString(t.data);a(e,t.name)}},loadAttackData:()=>{if(!l()||i())return;Object.values(App.game.multiplier.multipliers).forEach(e=>{const t=e.findIndex(e=>"Achievements"==e.source);t>-1&&e.splice(t,1)}),AchievementHandler.achievementList=[],AchievementHandler.achievementBonus=c,AchievementHandler.initialize(App.game.multiplier,App.game.challenges),player.regionStarters=[];const e=SaveData.file().player;for(let t=0;t<=GameConstants.MAX_AVAILABLE_REGION;t++)e.regionStarters&&null!=e.regionStarters[t]?player.regionStarters.push(ko.observable(e.regionStarters[t])):t<(e.highestRegion??0)?player.regionStarters.push(ko.observable(GameConstants.Starter.Grass)):t==(e.highestRegion??0)?player.regionStarters.push(ko.observable(GameConstants.Starter.None)):this.regionStarters.push(ko.observable(GameConstants.Starter.None));player.effectList=Save.initializeEffects(SaveData.file().player.effectList);const t=SaveData.file().player._itemList;if(player.itemList=Save.initializeItemlist(),t)for(const e in t)player.itemList[e]&&player.itemList[e](t[e]);player.effectList.xAttack(0),player.effectList.xClick(0),GameHelper.enumStrings(GameConstants.FluteItemType).forEach(e=>{player.effectList[e](0),player.itemList[e](1)}),EffectEngineRunner.initialize(App.game.multiplier,GameHelper.enumStrings(GameConstants.BattleItemType).map(e=>ItemList[e])),FluteEffectRunner.initialize(App.game.multiplier);const n=["breeding","keyItems","badgeCase","oakItems","party","gems","farming","statistics","quests","challenges","multiplier","underground"];Object.keys(App.game).filter(e=>n.includes(e)).filter(e=>App.game[e]?.saveKey).forEach(e=>{const t=App.game[e].saveKey;App.game[e].fromJSON(SaveData.file().save[t])}),SaveData.file().save.achievements?.forEach(e=>{const t=AchievementHandler.findByName(e);t&&t.unlocked(!0)}),AchievementHandler.preCheckAchievements(),AchievementHandler.calculateMaxBonus(),AchievementHandler.achievementList.forEach(e=>{e.unlocked()?e.isCompleted=()=>!0:e.isCompleted=()=>!1}),App.game.party.caughtPokemon.forEach(e=>e.level=App.game.badgeCase.maxLevel()),BattleCalculator.settings.xAttackEnabled(!1),BattleCalculator.settings.xClickEnabled(!1),BattleCalculator.settings.rockyHelmetEnabled(!1),BattleCalculator.settings.clicksPerSecond(0),BattleCalculator.settings.activeFlutes([]),BattleCalculator.settings.allFlutesToggle(!1),i(!0)},isLoaded:l,isOlderVersion:u,getMonoType:s,initialize:()=>{const e=localStorage.getItem("prevLoadedSaves");e&&o(JSON.parse(e)),o.subscribe(e=>{localStorage.setItem("prevLoadedSaves",JSON.stringify(e))})},isDamageLoaded:i}},{}],45:[function(e,t,n){const r=ko.observable(),o=ko.observable(),i=ko.observable(),a=ko.pureComputed(()=>r()&&o()),s=e=>new Promise(t=>{const n=new FileReader;n.onload=e=>{const n=JSON.parse(atob(e.target.result));t(n)},n.readAsText(e)});t.exports={selectedFix:r,selectedFile:o,saveFixError:i,fixList:[],canRunFix:a,fixSave:async()=>{if(i(void 0),!a())return void i("Select a fix to apply and a save file.");const e=o(),t=await s(e),n=r();if(n.requireCurrentVersion){if(t.save.update.version!=Companion.package.version)return void i(`This fix requires a save file from the current version - ${Companion.package.version}.`)}if(n.fixFunction(t.player,t.save,t.settings)){const n=btoa(JSON.stringify(t)),r=e.name.replace(".txt","_Fixed.txt");Util.downloadFile(n,r)}}}},{}],46:[function(e,t,n){const r=ko.observable(!1),o=ko.observable(!1),i=ko.observable("tab-my-save");r.subscribe(e=>localStorage.setItem("showRequiredOnly",+e)),o.subscribe(e=>localStorage.setItem("showAllRegions",+e)),i.subscribe(e=>localStorage.setItem("defaultTab",e));t.exports={showRequiredOnly:r,showAllRegions:o,defaultTab:i,initialize:()=>{if(+localStorage.getItem("showRequiredOnly")&&r(!0),+localStorage.getItem("showAllRegions")&&o(!0),localStorage.getItem("defaultTab")&&!window.location.hash.includes("#!")){const e=localStorage.getItem("defaultTab");document.getElementById(e)&&(i(e),new bootstrap.Tab(document.getElementById(e)).show())}}}},{}],47:[function(e,t,n){const r=e=>{if(e)return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`},o=e=>{if(e)return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},i=(e,t,n="text/plain")=>{const r=new Blob([e],{type:n}),o=window.URL.createObjectURL(r),i=document.createElement("a");i.setAttribute("href",o),i.setAttribute("download",`${t}`),i.click()},a=e("lzutf8"),s=[{id:"newfeatbattlecalculator",title:"New Feature",message:"Check out the new Battle Calculator on the Tools tab to see if your party is ready to take on their next challenge!",type:"info",timeout:3e4,expires:new Date(2024,2,22)},{id:"newforecastsummary",title:"Daily Summary",message:'Check out the <a class="text-dark text-decoration-underline" href="/#!Forecast/Summary" onclick="$(\'#tab-forecasts\').click(); $(\'#tab-summary\').click(); return false;">Daily Summary</a> on the Forecasts tab for a quick look at daily occurrences all in one place!',type:"info",timeout:3e4,expires:new Date(2024,9,16)},{id:"pastesupport",title:"Paste Support",message:"You can now paste your save file (the content copied to clipboard or the file itself) anywhere on the Companion and it will detect and load that file.",type:"info",timeout:3e4,expires:new Date(2025,8,1)},{id:"routesandgymsupdates",title:"UI/UX Updates",message:"The [Routes] and [Gyms] sections of the <strong>My Save  Statistics & More</strong> page has been updated with a new look.",type:"info",timeout:3e4,expires:new Date(2025,8,5)}];t.exports={formatDate:r,formatDateTime:e=>{if(e)return`${r(e)} ${o(e)}`},formatTime24Hours:o,dateAddHours:(e,t)=>{const n=new Date(e);return n.setHours(n.getHours()+t),n},arrayToWhatever:e=>{const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e?.[n+1]]);return t},splitArrayAlternating:(e,t=2)=>{const n=Array.from({length:t},e=>[]);for(let r=0;r<e.length;r++)n[r%t].push(e[r]);return n},splitArrayChunked:(e,t=2)=>{const n=e.length%t,r=Math.floor(e.length/t);let o=0;return Array.from({length:t},(t,i)=>e.slice(o,o+=r+(i<n)))},exportToCsv:(e,t,n="export.csv")=>{const r=[e.join(","),...t.map(e=>e.join(","))];i(r.join("\n"),n,"text/csv")},downloadFile:i,compressString:(e,t="Base64")=>a.compress(e,{outputEncoding:t}),decompressString:(e,t="Base64")=>a.decompress(e,{inputEncoding:t}),notify:({message:e,type:t="primary",timeout:n=5e3,title:r="",onHideFunction:o})=>{const i=Rand.string(7),a=`<div id="${i}" class="toast bg-${t}" data-bs-autohide="false">\n        ${r?`<div class="toast-header">\n            <strong class="me-auto">${r}</strong>\n            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>\n        </div>`:""}\n        <div class="toast-body d-flex">\n            <span class="flex-grow-1">${e.replace(/\n/g,"<br/>")}</span>\n            ${r?"":'<button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>'}\n        </div>\n    </div>`;$("#toaster").prepend(a),$(`#${i}`)?.toast("show"),$(`#${i}`).on("shown.bs.toast",()=>{setTimeout(()=>{$(`#${i}`).toast("hide")},n)}),$(`#${i}`).on("hidden.bs.toast",()=>{document.getElementById(i).remove(),o?.()})},getRegionNameText:(e,t=0)=>{const n=GameConstants.camelCaseToString(GameConstants.Region[e]),r=SubRegions.getSubRegionById(e,t)?.name;return n!=r&&r?`${n} / ${r}`:n},createNotifications:()=>{const e=JSON.parse(localStorage.getItem("seenNotifications"))||[];s.filter(t=>Date.now()<t.expires&&!e.includes(t.id)).forEach(e=>{Util.notify({message:e.message,type:e.type,timeout:e.timeout,title:e.title,onHideFunction:()=>{const t=JSON.parse(localStorage.getItem("seenNotifications"))||[];t.push(e.id),localStorage.setItem("seenNotifications",JSON.stringify(t))}})})}}},{lzutf8:6}],48:[function(e,t,n){const r=(e,t)=>t*((GameConstants.BREEDING_ATTACK_BONUS+e[GameConstants.VitaminType.Calcium])/100)+e[GameConstants.VitaminType.Protein],o=(e,t)=>{const n=(t+(e[GameConstants.VitaminType.Calcium]+e[GameConstants.VitaminType.Protein])/2)*GameConstants.EGG_CYCLE_MULTIPLIER;return n<=300?n:Math.round((n/300)**(1-e[GameConstants.VitaminType.Carbos]/70)*300)},i=ko.observable(!1),a=ko.observable(GameConstants.Region.kanto),s=ko.observable(""),l=ko.observable(!1),u=ko.observable(!1),c=ko.observable(!1);l.subscribe(e=>localStorage.setItem("hidePokemonOptimalVitamins",+e)),u.subscribe(e=>localStorage.setItem("hideUncaughtPokemon",+e)),c.subscribe(e=>localStorage.setItem("hideShinyPokemon",+e));const d=ko.observable("id"),f=ko.observable(!1),p=ko.pureComputed(()=>{if(!i())return[];const e=a(),t=SaveData.isLoaded(),n=h();return n.forEach(n=>{const r=n.regionVitamins[e];n.bestVitamins=r.bestVitamins,n.breedingEfficiency=r.breedingEfficiency,n.vitaminEggSteps=r.vitaminEggSteps,n.attackBonus=r.attackBonus,n.vitaminText=n.bestVitamins.map((e,r)=>{if(!t)return e;const o=Companion.partyList()[n.id]?.vitaminsUsed[r]()??0;return o===e?e:`${o} <span class="text-warning">(${e})</span>`})}),n}),h=()=>{const e=a(),t=s()?.toLowerCase();return y.filter(n=>{if(n.obtainRegion>e)return!1;if(t&&!n.id.toString().includes(t)&&!n.name.toLowerCase().includes(t))return!1;const r=Companion.partyList()[n.id];return!(SaveData.isLoaded()&&u()&&!r)&&((!r?.shiny||!c())&&!(l()&&r&&GameHelper.enumNumbers(GameConstants.VitaminType).every(t=>n.regionVitamins[e].bestVitamins[t]==r.vitaminsUsed[t]())))})},m=ko.pureComputed(()=>{const e=d(),t=f();return Object.values(p()).sort(function(e,t){return function(n,r){let o,i=t?-1:1;const a=b(e,n),s=b(e,r);return a==s?n.id-r.id:(o=a<s?-1:a>s?1:0,o*i)}}(e,t))}),g=ko.pureComputed(()=>{if(!i())return{vitaminCount:[0,0,0],totalCost:0};const e=a(),t=y.reduce((t,n)=>{if(n.obtainRegion<=e){n.regionVitamins[e].bestVitamins.forEach((e,n)=>t[n]+=e)}return t},[0,0,0]),n=[0,0,0];SaveData.isLoaded()&&(GameHelper.enumStrings(GameConstants.VitaminType).forEach((e,t)=>{n[t]+=SaveData.file().player._itemList[e]??0}),SaveData.file().save.party.caughtPokemon.forEach(e=>{const t=e[PartyPokemonSaveKeys.vitaminsUsed];Object.values(t).forEach((e,t)=>n[t]+=e)}));const r=t.reduce((e,t,n)=>e+ItemList[GameConstants.VitaminType[n]].totalPrice(t),0),o=n.reduce((e,t,n)=>e+ItemList[GameConstants.VitaminType[n]].totalPrice(t),0);return t.forEach((e,r)=>{t[r]=Math.max(0,e-n[r])}),{vitaminCount:t,totalCost:Math.max(0,r-o)}});function b(e,t){switch(e){case"name":return t.name;case"base-attack":return t.attack;case"base-bonus":return t.baseAttackBonus;case"base-steps":return t.baseEggSteps;case"vitamin-bonus":return t.attackBonus;case"vitamin-steps":return t.vitaminEggSteps;case"breeding-efficiency":return t.breedingEfficiency;default:return t.id}}$(document).ready(()=>{+localStorage.getItem("hidePokemonOptimalVitamins")&&l(!0),+localStorage.getItem("hideUncaughtPokemon")&&u(!0),+localStorage.getItem("hideShinyPokemon")&&c(!0),$(document).on("click","#vitaminTrackerTable thead th.sortable",e=>{const t=e.currentTarget.dataset.sort;d()==t?f(!f()):(d(t),f(!0))}),fetch(`/assets/data/v${Companion.package.version}/optimalVitamins.json`).then(e=>e.json()).then(e=>{Companion.data.optimalVitamins=e,w(),i(!0)})});let y=[];const w=()=>{const e=[...Companion.data.obtainablePokemonList];e.forEach(e=>{e.baseAttackBonus=r([0,0,0],e.attack),e.baseEggSteps=o([0,0,0],e.eggCycles),e.regionVitamins=Companion.data.optimalVitamins[e.id]}),y=e};t.exports={highestRegion:a,searchValue:s,hidePokemonOptimalVitamins:l,hideUncaughtPokemon:u,hideShinyPokemon:c,getSortedVitaminList:m,getTotalVitaminsNeeded:g,exportData:()=>{const e=SaveData.isLoaded(),t=["#","Pokemon","Type 1","Type 2"];e&&t.push("Caught","Shiny"),t.push("Native Region","Base Attack","Base Attack Bonus","Base Egg Steps"),GameHelper.enumStrings(GameConstants.VitaminType).forEach(n=>{e&&t.push(`Current ${n}`),t.push(`Optimal ${n}`)}),t.push("Vitamin Attack Bonus","Vitamin Egg Steps","Breeding Efficiency");const n=[];m().forEach(t=>{const r=pokemonMap[t.id].type,o=[t.id,`"${t.name}"`,PokemonType[r[0]],PokemonType[r[1]??-1]];e&&o.push(Companion.partyList()[t.id]?1:0,Companion.partyList()[t.id]?.shiny?1:0),o.push(GameConstants.camelCaseToString(GameConstants.Region[t.nativeRegion]),t.attack,t.baseAttackBonus,t.baseEggSteps),t.bestVitamins.forEach((n,r)=>{e&&o.push(Companion.partyList()[t.id]?.vitaminsUsed[r]()??0),o.push(n)}),o.push(t.attackBonus,t.vitaminEggSteps,t.breedingEfficiency),n.push(o)}),Util.exportToCsv(t,n,`VitaminTracker-${Date.now()}.csv`)},loadVitaminTrackerTable:i}},{}]},{},[43]);